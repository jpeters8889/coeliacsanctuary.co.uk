(self.webpackChunk=self.webpackChunk||[]).push([[259],{2102:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});const a={data:function(){return{hasError:!1,showError:!1,errorText:"",currentValue:""}},props:{type:{type:String,default:"text"},name:{type:String,required:!0},value:{type:String,default:""},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},min:{type:Number,default:null},max:{type:Number,default:null},pattern:{type:RegExp,default:null},patternError:{type:String,default:"Field is Invalid"},match:{type:String,default:null}},mounted:function(){var e=this;this.currentValue=this.value,this.required&&""===this.currentValue&&(this.hasError=!0),this.$root.$on(this.name+"-get-value",(function(){e.validate(),e.$root.$emit(e.name+"-value",e.currentValue)})),this.$root.$on(this.name+"-set-value",(function(t){e.currentValue=t,e.hasError=!0,e.validate()})),this.$root.$on(this.name+"-reset",(function(){e.currentValue="",e.showError=!1})),this.$root.$on(this.name+"-validate",(function(){e.hasError=!0,e.validate()}))},methods:{validate:function(){if(this.showError=!0,this.required&&""===this.currentValue)return this.errorText="Field is required",void this.pushError();if(this.pattern&&(this.required||""!==this.currentValue)&&!this.currentValue.match(this.pattern))return this.errorText=this.patternError,void this.pushError();if(this.match&&this.currentValue!==this.match)return this.errorText="Field does not match",void this.pushError();switch(this.type){case"email":if(!this.checkEmail())return this.errorText="Must be a valid email address",void this.pushError()}this.hasError=!1,this.errorText="",this.$root.$emit(this.name+"-valid")},checkEmail:function(){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(this.currentValue)},pushError:function(){this.hasError=!0,this.$root.$emit(this.name+"-error",this.errorText)}},watch:{hasError:function(){this.hasError?this.$root.$emit(this.name+"-error",this.errorText):this.$root.$emit(this.name+"-valid")},currentValue:function(e){this.$root.$emit(this.name+"-change",e)}}}},7289:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r(3645),n=r.n(a)()((function(e){return e[1]}));n.push([e.id,"input:focus{outline:none}input:-webkit-autofill{background:none}",""]);const i=n},1777:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r(3645),n=r.n(a)()((function(e){return e[1]}));n.push([e.id,"input:focus{outline:none}input:-webkit-autofill{background:none}",""]);const i=n},5598:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var a=r(511),n=r(6631);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const s={components:{"form-input":a.Z,"form-textarea":n.Z},props:{area:{type:String,required:!0},id:{type:Number,required:!0}},data:function(){return{formData:{name:"",email:"",comment:""},validity:{name:!1,email:!1,comment:!1}}},mounted:function(){var e=this;Object.keys(this.validity).forEach((function(t){e.$root.$on("".concat(t,"-error"),(function(){e.validity[t]=!1})),e.$root.$on("".concat(t,"-valid"),(function(){e.validity[t]=!0})),e.$root.$on("".concat(t,"-value"),(function(r){e.formData[t]=r}))}))},methods:{submitForm:function(){var e=this;this.validateForm()&&coeliac().request().post("/api/comments",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({area:this.area,id:this.id},this.formData)).then((function(t){if(200===t.status)return Object.keys(e.validity).forEach((function(t){e.formData[t]="",e.$root.$emit("".concat(t,"-reset"))})),void coeliac().success("Thanks, your comment has been submitted and is awaiting approval!");coeliac().error("Sorry, there was an error submitting your comment, please try again.")}))},validateForm:function(){var e=this;Object.keys(this.validity).forEach((function(t){e.$root.$emit("".concat(t,"-get-value"))}));var t=!0;return Object.keys(this.validity).forEach((function(r){!1===e.validity[r]&&(t=!1)})),t}}};const l=(0,r(1900).Z)(s,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-box p-3 mt-3"},[r("h2",{staticClass:"text-2xl my-2 font-semibold font-coeliac"},[e._v("Submit a Comment")]),e._v(" "),r("p",[e._v("Want to leave a comment on this "+e._s(e.area)+"? Feel free to join the discussion!")]),e._v(" "),r("div",{staticClass:"flex mt-2 flex-col"},[r("div",{staticClass:"mb-5 flex-1"},[r("form-input",{attrs:{required:"",name:"name",value:e.formData.name,placeholder:"Your name..."}})],1),e._v(" "),r("div",{staticClass:"mb-5 flex-1"},[r("form-input",{attrs:{required:"",name:"email",type:"email",value:e.formData.email,placeholder:"Your email..."}})],1),e._v(" "),r("div",{staticClass:"mb-5 flex-1"},[r("form-textarea",{attrs:{required:"",name:"comment",value:e.formData.comment,rows:10,placeholder:"Your comment..."}})],1)]),e._v(" "),r("p",{staticClass:"-mt-2 text-sm italic"},[e._v("\n        Note, your email address will never be displayed with your comment, it is only\n        required to alert you when your comment has been approved or if the Coeliac Sanctuary team reply to your\n        comment.\n    ")]),e._v(" "),r("button",{staticClass:"mt-2 bg-blue-50 border border-blue rounded-lg px-6 py-2 text-xl text-black transition-bg hover:bg-blue-20",on:{click:function(t){return t.preventDefault(),e.submitForm()}}},[e._v("\n        Submit Comment\n    ")])])}),[],!1,null,null,null).exports},511:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});const a={mixins:[r(2102).Z]};var n=r(3379),i=r.n(n),o=r(7289),s={insert:"head",singleton:!1};i()(o.Z,s);o.Z.locals;const l=(0,r(1900).Z)(a,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex overflow-hidden border border-blue rounded"},[r("div",{staticClass:"bg-grey-lightest p-0 flex-1"},["checkbox"===e.type?r("input",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],staticClass:"w-full bg-transparent border-0 p-3 m-0 text-grey-darkest",class:e.disabled?"text-grey-light cursor:not-allowed":"",attrs:{name:e.name,placeholder:e.placeholder,min:e.min,max:e.max,disabled:e.disabled,type:"checkbox"},domProps:{checked:Array.isArray(e.currentValue)?e._i(e.currentValue,null)>-1:e.currentValue},on:{blur:function(t){return e.validate()},change:function(t){var r=e.currentValue,a=t.target,n=!!a.checked;if(Array.isArray(r)){var i=e._i(r,null);a.checked?i<0&&(e.currentValue=r.concat([null])):i>-1&&(e.currentValue=r.slice(0,i).concat(r.slice(i+1)))}else e.currentValue=n}}}):"radio"===e.type?r("input",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],staticClass:"w-full bg-transparent border-0 p-3 m-0 text-grey-darkest",class:e.disabled?"text-grey-light cursor:not-allowed":"",attrs:{name:e.name,placeholder:e.placeholder,min:e.min,max:e.max,disabled:e.disabled,type:"radio"},domProps:{checked:e._q(e.currentValue,null)},on:{blur:function(t){return e.validate()},change:function(t){e.currentValue=null}}}):r("input",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],staticClass:"w-full bg-transparent border-0 p-3 m-0 text-grey-darkest",class:e.disabled?"text-grey-light cursor:not-allowed":"",attrs:{name:e.name,placeholder:e.placeholder,min:e.min,max:e.max,disabled:e.disabled,type:e.type},domProps:{value:e.currentValue},on:{blur:function(t){return e.validate()},input:function(t){t.target.composing||(e.currentValue=t.target.value)}}})]),e._v(" "),e.hasError&&e.showError?r("div",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:{content:e.errorText,classes:["bg-red","border-red","text-white"],boundariesElement:"body"},expression:"{content: errorText, classes: ['bg-red', 'border-red', 'text-white'], boundariesElement: 'body'}",modifiers:{left:!0}}],staticClass:"bg-red flex justify-center items-center p-2 text-white"},[r("font-awesome-icon",{attrs:{icon:["fas","exclamation-circle"]}})],1):e._e()])}),[],!1,null,null,null).exports},6631:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});const a={mixins:[r(2102).Z],props:{rows:{type:Number,default:3}}};var n=r(3379),i=r.n(n),o=r(1777),s={insert:"head",singleton:!1};i()(o.Z,s);o.Z.locals;const l=(0,r(1900).Z)(a,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex overflow-hidden border border-blue rounded"},[r("div",{staticClass:"bg-grey-lightest flex-1"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],staticClass:"w-full bg-transparent border-0 p-3 m-0 text-grey-darkest",attrs:{name:e.name,placeholder:e.placeholder,rows:e.rows,maxlength:e.max},domProps:{value:e.currentValue},on:{blur:function(t){return e.validate()},input:function(t){t.target.composing||(e.currentValue=t.target.value)}}})]),e._v(" "),e.hasError&&e.showError?r("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.errorText,classes:["bg-red","border-red","text-white"]},expression:"{content: errorText, classes: ['bg-red', 'border-red', 'text-white']}"}],staticClass:"bg-red flex justify-center p-2 text-white pt-3"},[r("font-awesome-icon",{attrs:{icon:["fas","exclamation-circle"]}})],1):e._e()])}),[],!1,null,null,null).exports}}]);