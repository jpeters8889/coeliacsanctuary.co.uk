(self.webpackChunk=self.webpackChunk||[]).push([[106],{3425:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n={methods:{isLoggedIn:function(){return null!==window.config.user},userHasVerifiedEmail:function(){return null!==window.config.user.email_verified_at}}}},4242:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n={mixins:[s(3425).Z],data:function(){return{showUserCta:!1,isSubscribed:!1,updatable:null,type:null}},mounted:function(){var e=this;this.seeIfSubscribed(),this.$root.$on("modal-closed",(function(t){"userCta"===t&&(e.showUserCta=!1)}))},methods:{toggleSubscription:function(){this.isLoggedIn()?this.isSubscribed?this.unsubscribe():this.subscribe():this.showUserCta=!0},unsubscribe:function(){var e=this;coeliac().request().delete("/api/member/dashboard/daily-updates/".concat(this.isSubscribed.id)).then((function(){e.unsubscribeSuccess(),e.isSubscribed=!1})).catch((function(){e.unsubscribeError()}))},subscribe:function(){var e=this;coeliac().request().post("/api/member/dashboard/daily-updates",{type:this.type,updatable:this.updatable}).then((function(){e.subscribeSuccess(),e.seeIfSubscribed()})).catch((function(){e.unsubscribeError()}))},seeIfSubscribed:function(){var e=this;return coeliac().request().post("/api/member/dashboard/daily-updates/search",{type:this.type,updatable:this.updatable}).then((function(t){200!==t.status?e.isSubscribed=!1:e.isSubscribed=t.data})).catch((function(){e.isSubscribed=!1}))},unsubscribeSuccess:function(){},unsubscribeError:function(){},subscribeSuccess:function(){},subscribeError:function(){}},computed:{icon:function(){return[this.isSubscribed?"fas":"far","bell"]}}}},1318:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const n={components:{modal:function(){return s.e(5441).then(s.bind(s,3516))}},mixins:[s(4242).Z],props:{typeId:{required:!0,type:Number},updatableId:{required:!0,type:Number},friendlyName:{required:!0,type:String}},data:function(){return{showUserCta:!1,isSubscribed:!1}},created:function(){this.updatable=this.updatableId,this.type=this.typeId},methods:{unsubscribeSuccess:function(){coeliac().success("You're now unsubscribed from daily updates for places added in '".concat(this.friendlyName,"'"))},unsubscribeError:function(){coeliac().success("Sorry, there was an error unsubscribing you from '".concat(this.friendlyName,"'."))},subscribeSuccess:function(){coeliac().success("You're now subscribed to getting daily updates when places are added in '".concat(this.friendlyName,"'"))},subscribeError:function(){coeliac().success("Sorry, there was an error subscribing you from '".concat(this.friendlyName,"'."))}},computed:{label:function(){return this.isSubscribed?"You're already subscribed to daily updates from <strong>".concat(this.friendlyName,"</strong>, unsubscribe?"):"Subscribe to <strong>".concat(this.friendlyName,"</strong>.")}}};const r=(0,s(1900).Z)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"mt-2 flex flex-col bg-yellow-50 border text-sm border-yellow p-2"},[s("p",[e._v("\n            Visit "),s("strong",[e._v(e._s(e.friendlyName))]),e._v(" often? Why not subscribe and get email notifications when new\n            places are added to "),s("strong",[e._v(e._s(e.friendlyName))]),e._v("?\n        ")]),e._v(" "),s("button",{staticClass:"mt-2 flex items-center bg-blue-light hover:bg-blue-light-80 rounded py-2 px-3 leading-none border-blue border transition-bg",on:{click:function(t){return e.toggleSubscription()}}},[s("font-awesome-icon",{staticClass:"text-xl",attrs:{icon:e.icon}}),e._v(" "),s("span",{staticClass:"text-left ml-2",domProps:{innerHTML:e._s(e.label)}})],1)]),e._v(" "),e.showUserCta?s("portal",{attrs:{to:"modal"}},[s("modal",{attrs:{small:"",name:"userCta","modal-classes":"text-center text-lg"}},[s("p",[e._v("You must be signed in get notifications when places are added to "),s("strong",[e._v(e._s(e.friendlyName))]),e._v("!\n            ")]),e._v(" "),s("p",[s("a",{staticClass:"font-semibold hover:text-blue-dark cursor-pointer",attrs:{href:"/member/register"}},[e._v("Create an\n                    account")])]),e._v(" "),s("p",[e._v("\n                Already got one? "),s("a",{staticClass:"font-semibold hover:text-blue-dark cursor-pointer",attrs:{href:"/member/login"}},[e._v("Log\n                in now.")])])])],1):e._e()],1)}),[],!1,null,null,null).exports},1900:(e,t,s)=>{"use strict";function n(e,t,s,n,r,i,o,c){var a,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=s,u._compiled=!0),n&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),o?(a=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=a):r&&(a=c?function(){r.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:r),a)if(u.functional){u._injectStyles=a;var d=u.render;u.render=function(e,t){return a.call(t),d(e,t)}}else{var l=u.beforeCreate;u.beforeCreate=l?[].concat(l,a):[a]}return{exports:e,options:u}}s.d(t,{Z:()=>n})}}]);