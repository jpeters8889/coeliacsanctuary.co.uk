"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[106],{4242:(e,s,t)=>{t.d(s,{Z:()=>i});const i={mixins:[t(3425).Z],data:function(){return{showUserCta:!1,isSubscribed:!1,updatable:null,type:null}},mounted:function(){var e=this;this.seeIfSubscribed(),this.$root.$on("modal-closed",(function(s){"userCta"===s&&(e.showUserCta=!1)}))},methods:{toggleSubscription:function(){this.isLoggedIn()?this.isSubscribed?this.unsubscribe():this.subscribe():this.showUserCta=!0},unsubscribe:function(){var e=this;coeliac().request().delete("/api/member/dashboard/daily-updates/".concat(this.isSubscribed.id)).then((function(){e.unsubscribeSuccess(),e.isSubscribed=!1})).catch((function(){e.unsubscribeError()}))},subscribe:function(){var e=this;coeliac().request().post("/api/member/dashboard/daily-updates",{type:this.type,updatable:this.updatable}).then((function(){e.subscribeSuccess(),e.seeIfSubscribed()})).catch((function(){e.unsubscribeError()}))},seeIfSubscribed:function(){var e=this;return coeliac().request().post("/api/member/dashboard/daily-updates/search",{type:this.type,updatable:this.updatable}).then((function(s){200!==s.status?e.isSubscribed=!1:e.isSubscribed=s.data})).catch((function(){e.isSubscribed=!1}))},unsubscribeSuccess:function(){},unsubscribeError:function(){},subscribeSuccess:function(){},subscribeError:function(){}},computed:{icon:function(){return[this.isSubscribed?"fas":"far","bell"]}}}},5221:(e,s,t)=>{t.r(s),t.d(s,{default:()=>r});const i={components:{modal:function(){return t.e(5441).then(t.bind(t,4609))}},mixins:[t(4242).Z],props:{typeId:{required:!0,type:Number},updatableId:{required:!0,type:Number},friendlyName:{required:!0,type:String}},data:function(){return{showUserCta:!1,isSubscribed:!1}},computed:{label:function(){return this.isSubscribed?"You're already subscribed to daily updates from <strong>".concat(this.friendlyName,"</strong>, unsubscribe?"):"Subscribe to <strong>".concat(this.friendlyName,"</strong>.")}},created:function(){this.updatable=this.updatableId,this.type=this.typeId},methods:{unsubscribeSuccess:function(){coeliac().success("You're now unsubscribed from daily updates for places added in '".concat(this.friendlyName,"'"))},unsubscribeError:function(){coeliac().success("Sorry, there was an error unsubscribing you from '".concat(this.friendlyName,"'."))},subscribeSuccess:function(){coeliac().success("You're now subscribed to getting daily updates when places are added in '".concat(this.friendlyName,"'"))},subscribeError:function(){coeliac().success("Sorry, there was an error subscribing you from '".concat(this.friendlyName,"'."))}}};const r=(0,t(1900).Z)(i,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("div",{staticClass:"mt-2 flex flex-col bg-yellow bg-opacity-50 border text-sm border-yellow p-2"},[t("p",[e._v("\n      Visit "),t("strong",[e._v(e._s(e.friendlyName))]),e._v(" often? Why not subscribe and get email notifications when new\n      places are added to "),t("strong",[e._v(e._s(e.friendlyName))]),e._v("?\n    ")]),e._v(" "),t("button",{staticClass:"mt-2 flex items-center bg-blue-light hover:bg-opacity-80 rounded py-2 px-3 leading-none border-blue border transition-all",on:{click:function(s){return e.toggleSubscription()}}},[t("font-awesome-icon",{staticClass:"text-xl",attrs:{icon:e.icon}}),e._v(" "),t("span",{staticClass:"text-left ml-2",domProps:{innerHTML:e._s(e.label)}})],1)]),e._v(" "),e.showUserCta?t("portal",{attrs:{to:"modal"}},[t("modal",{attrs:{small:"",name:"userCta","modal-classes":"text-center text-lg",title:"Ooops!"}},[t("div",{staticClass:"flex flex-col space-y-3 p-3"},[t("p",[e._v("\n          You must be signed in get notifications when places are added to\n          "),t("strong",[e._v(e._s(e.friendlyName))]),e._v("!\n        ")]),e._v(" "),t("p",[t("a",{staticClass:"font-semibold hover:text-blue-dark cursor-pointer",attrs:{href:"/member/register"}},[e._v("\n            Create an account\n          ")])]),e._v(" "),t("p",[e._v("\n          Already got one?\n          "),t("a",{staticClass:"font-semibold hover:text-blue-dark cursor-pointer",attrs:{href:"/member/login"}},[e._v("\n            Log in now.\n          ")])])])])],1):e._e()],1)}),[],!1,null,null,null).exports}}]);