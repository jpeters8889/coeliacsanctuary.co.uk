(self.webpackChunk=self.webpackChunk||[]).push([[6360],{1560:(t,e,s)=>{"use strict";s.d(e,{Z:()=>a});const a={methods:{formatPrice:function(t){return t=(t/100).toFixed(2),"&pound;".concat(t)}}}},9081:(t,e,s)=>{"use strict";s.d(e,{Z:()=>a});const a={methods:{googleEvent:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};window.gtag&&window.gtag(t,e,s)}}}},3425:(t,e,s)=>{"use strict";s.d(e,{Z:()=>a});const a={methods:{isLoggedIn:function(){return null!==window.config.user},userHasVerifiedEmail:function(){return null!==window.config.user.email_verified_at}}}},2394:(t,e,s)=>{"use strict";s.d(e,{Z:()=>a});s(2732);const a={methods:{loadLazyImages:function(){coeliac().updateLazyloader()}},computed:{lazyLoadSrc:function(){return"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 2'%3E%3C/svg%3E"}}}},2840:(t,e,s)=>{"use strict";function a(t){return new Promise((function(e){if(document.querySelector('script[src="'+t+'"]'))e();else{var s=document.createElement("script");s.setAttribute("src",t),document.body.appendChild(s),s.addEventListener("load",e)}}))}s.d(e,{v:()=>a})},5804:(t,e)=>{e.Od=function(t){return t.replace(/[^\u0000-\u007e]/g,(function(t){return a[t]||t}))};for(var s=[{base:" ",chars:" "},{base:"0",chars:"߀"},{base:"A",chars:"ⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",chars:"Ꜳ"},{base:"AE",chars:"ÆǼǢ"},{base:"AO",chars:"Ꜵ"},{base:"AU",chars:"Ꜷ"},{base:"AV",chars:"ꜸꜺ"},{base:"AY",chars:"Ꜽ"},{base:"B",chars:"ⒷＢḂḄḆɃƁ"},{base:"C",chars:"ⒸＣꜾḈĆCĈĊČÇƇȻ"},{base:"D",chars:"ⒹＤḊĎḌḐḒḎĐƊƉᴅꝹ"},{base:"Dh",chars:"Ð"},{base:"DZ",chars:"ǱǄ"},{base:"Dz",chars:"ǲǅ"},{base:"E",chars:"ɛⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎᴇ"},{base:"F",chars:"ꝼⒻＦḞƑꝻ"},{base:"G",chars:"ⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾɢ"},{base:"H",chars:"ⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",chars:"ⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",chars:"ⒿＪĴɈȷ"},{base:"K",chars:"ⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",chars:"ⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",chars:"Ǉ"},{base:"Lj",chars:"ǈ"},{base:"M",chars:"ⓂＭḾṀṂⱮƜϻ"},{base:"N",chars:"ꞤȠⓃＮǸŃÑṄŇṆŅṊṈƝꞐᴎ"},{base:"NJ",chars:"Ǌ"},{base:"Nj",chars:"ǋ"},{base:"O",chars:"ⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OE",chars:"Œ"},{base:"OI",chars:"Ƣ"},{base:"OO",chars:"Ꝏ"},{base:"OU",chars:"Ȣ"},{base:"P",chars:"ⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",chars:"ⓆＱꝖꝘɊ"},{base:"R",chars:"ⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",chars:"ⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",chars:"ⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"Th",chars:"Þ"},{base:"TZ",chars:"Ꜩ"},{base:"U",chars:"ⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",chars:"ⓋＶṼṾƲꝞɅ"},{base:"VY",chars:"Ꝡ"},{base:"W",chars:"ⓌＷẀẂŴẆẄẈⱲ"},{base:"X",chars:"ⓍＸẊẌ"},{base:"Y",chars:"ⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",chars:"ⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",chars:"ⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐɑ"},{base:"aa",chars:"ꜳ"},{base:"ae",chars:"æǽǣ"},{base:"ao",chars:"ꜵ"},{base:"au",chars:"ꜷ"},{base:"av",chars:"ꜹꜻ"},{base:"ay",chars:"ꜽ"},{base:"b",chars:"ⓑｂḃḅḇƀƃɓƂ"},{base:"c",chars:"ｃⓒćĉċčçḉƈȼꜿↄ"},{base:"d",chars:"ⓓｄḋďḍḑḓḏđƌɖɗƋᏧԁꞪ"},{base:"dh",chars:"ð"},{base:"dz",chars:"ǳǆ"},{base:"e",chars:"ⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇǝ"},{base:"f",chars:"ⓕｆḟƒ"},{base:"ff",chars:"ﬀ"},{base:"fi",chars:"ﬁ"},{base:"fl",chars:"ﬂ"},{base:"ffi",chars:"ﬃ"},{base:"ffl",chars:"ﬄ"},{base:"g",chars:"ⓖｇǵĝḡğġǧģǥɠꞡꝿᵹ"},{base:"h",chars:"ⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",chars:"ƕ"},{base:"i",chars:"ⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",chars:"ⓙｊĵǰɉ"},{base:"k",chars:"ⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",chars:"ⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇɭ"},{base:"lj",chars:"ǉ"},{base:"m",chars:"ⓜｍḿṁṃɱɯ"},{base:"n",chars:"ⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥлԉ"},{base:"nj",chars:"ǌ"},{base:"o",chars:"ⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿꝋꝍɵɔᴑ"},{base:"oe",chars:"œ"},{base:"oi",chars:"ƣ"},{base:"oo",chars:"ꝏ"},{base:"ou",chars:"ȣ"},{base:"p",chars:"ⓟｐṕṗƥᵽꝑꝓꝕρ"},{base:"q",chars:"ⓠｑɋꝗꝙ"},{base:"r",chars:"ⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",chars:"ⓢｓśṥŝṡšṧṣṩșşȿꞩꞅẛʂ"},{base:"ss",chars:"ß"},{base:"t",chars:"ⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"th",chars:"þ"},{base:"tz",chars:"ꜩ"},{base:"u",chars:"ⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",chars:"ⓥｖṽṿʋꝟʌ"},{base:"vy",chars:"ꝡ"},{base:"w",chars:"ⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",chars:"ⓧｘẋẍ"},{base:"y",chars:"ⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",chars:"ⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],a={},i=0;i<s.length;i+=1)for(var o=s[i].chars,n=0;n<o.length;n+=1)a[o[n]]=s[i].base},6796:t=>{"use strict";t.exports=JSON.parse('[["AF","AFG","004","ISO 3166-2:AF"],["AL","ALB","008","ISO 3166-2:AL"],["DZ","DZA","012","ISO 3166-2:DZ"],["AS","ASM","016","ISO 3166-2:AS"],["AD","AND","020","ISO 3166-2:AD"],["AO","AGO","024","ISO 3166-2:AO"],["AI","AIA","660","ISO 3166-2:AI"],["AQ","ATA","010","ISO 3166-2:AQ"],["AG","ATG","028","ISO 3166-2:AG"],["AR","ARG","032","ISO 3166-2:AR"],["AM","ARM","051","ISO 3166-2:AM"],["AW","ABW","533","ISO 3166-2:AW"],["AU","AUS","036","ISO 3166-2:AU"],["AT","AUT","040","ISO 3166-2:AT"],["AZ","AZE","031","ISO 3166-2:AZ"],["BS","BHS","044","ISO 3166-2:BS"],["BH","BHR","048","ISO 3166-2:BH"],["BD","BGD","050","ISO 3166-2:BD"],["BB","BRB","052","ISO 3166-2:BB"],["BY","BLR","112","ISO 3166-2:BY"],["BE","BEL","056","ISO 3166-2:BE"],["BZ","BLZ","084","ISO 3166-2:BZ"],["BJ","BEN","204","ISO 3166-2:BJ"],["BM","BMU","060","ISO 3166-2:BM"],["BT","BTN","064","ISO 3166-2:BT"],["BO","BOL","068","ISO 3166-2:BO"],["BA","BIH","070","ISO 3166-2:BA"],["BW","BWA","072","ISO 3166-2:BW"],["BV","BVT","074","ISO 3166-2:BV"],["BR","BRA","076","ISO 3166-2:BR"],["IO","IOT","086","ISO 3166-2:IO"],["BN","BRN","096","ISO 3166-2:BN"],["BG","BGR","100","ISO 3166-2:BG"],["BF","BFA","854","ISO 3166-2:BF"],["BI","BDI","108","ISO 3166-2:BI"],["KH","KHM","116","ISO 3166-2:KH"],["CM","CMR","120","ISO 3166-2:CM"],["CA","CAN","124","ISO 3166-2:CA"],["CV","CPV","132","ISO 3166-2:CV"],["KY","CYM","136","ISO 3166-2:KY"],["CF","CAF","140","ISO 3166-2:CF"],["TD","TCD","148","ISO 3166-2:TD"],["CL","CHL","152","ISO 3166-2:CL"],["CN","CHN","156","ISO 3166-2:CN"],["CX","CXR","162","ISO 3166-2:CX"],["CC","CCK","166","ISO 3166-2:CC"],["CO","COL","170","ISO 3166-2:CO"],["KM","COM","174","ISO 3166-2:KM"],["CG","COG","178","ISO 3166-2:CG"],["CD","COD","180","ISO 3166-2:CD"],["CK","COK","184","ISO 3166-2:CK"],["CR","CRI","188","ISO 3166-2:CR"],["CI","CIV","384","ISO 3166-2:CI"],["HR","HRV","191","ISO 3166-2:HR"],["CU","CUB","192","ISO 3166-2:CU"],["CY","CYP","196","ISO 3166-2:CY"],["CZ","CZE","203","ISO 3166-2:CZ"],["DK","DNK","208","ISO 3166-2:DK"],["DJ","DJI","262","ISO 3166-2:DJ"],["DM","DMA","212","ISO 3166-2:DM"],["DO","DOM","214","ISO 3166-2:DO"],["EC","ECU","218","ISO 3166-2:EC"],["EG","EGY","818","ISO 3166-2:EG"],["SV","SLV","222","ISO 3166-2:SV"],["GQ","GNQ","226","ISO 3166-2:GQ"],["ER","ERI","232","ISO 3166-2:ER"],["EE","EST","233","ISO 3166-2:EE"],["ET","ETH","231","ISO 3166-2:ET"],["FK","FLK","238","ISO 3166-2:FK"],["FO","FRO","234","ISO 3166-2:FO"],["FJ","FJI","242","ISO 3166-2:FJ"],["FI","FIN","246","ISO 3166-2:FI"],["FR","FRA","250","ISO 3166-2:FR"],["GF","GUF","254","ISO 3166-2:GF"],["PF","PYF","258","ISO 3166-2:PF"],["TF","ATF","260","ISO 3166-2:TF"],["GA","GAB","266","ISO 3166-2:GA"],["GM","GMB","270","ISO 3166-2:GM"],["GE","GEO","268","ISO 3166-2:GE"],["DE","DEU","276","ISO 3166-2:DE"],["GH","GHA","288","ISO 3166-2:GH"],["GI","GIB","292","ISO 3166-2:GI"],["GR","GRC","300","ISO 3166-2:GR"],["GL","GRL","304","ISO 3166-2:GL"],["GD","GRD","308","ISO 3166-2:GD"],["GP","GLP","312","ISO 3166-2:GP"],["GU","GUM","316","ISO 3166-2:GU"],["GT","GTM","320","ISO 3166-2:GT"],["GN","GIN","324","ISO 3166-2:GN"],["GW","GNB","624","ISO 3166-2:GW"],["GY","GUY","328","ISO 3166-2:GY"],["HT","HTI","332","ISO 3166-2:HT"],["HM","HMD","334","ISO 3166-2:HM"],["VA","VAT","336","ISO 3166-2:VA"],["HN","HND","340","ISO 3166-2:HN"],["HK","HKG","344","ISO 3166-2:HK"],["HU","HUN","348","ISO 3166-2:HU"],["IS","ISL","352","ISO 3166-2:IS"],["IN","IND","356","ISO 3166-2:IN"],["ID","IDN","360","ISO 3166-2:ID"],["IR","IRN","364","ISO 3166-2:IR"],["IQ","IRQ","368","ISO 3166-2:IQ"],["IE","IRL","372","ISO 3166-2:IE"],["IL","ISR","376","ISO 3166-2:IL"],["IT","ITA","380","ISO 3166-2:IT"],["JM","JAM","388","ISO 3166-2:JM"],["JP","JPN","392","ISO 3166-2:JP"],["JO","JOR","400","ISO 3166-2:JO"],["KZ","KAZ","398","ISO 3166-2:KZ"],["KE","KEN","404","ISO 3166-2:KE"],["KI","KIR","296","ISO 3166-2:KI"],["KP","PRK","408","ISO 3166-2:KP"],["KR","KOR","410","ISO 3166-2:KR"],["KW","KWT","414","ISO 3166-2:KW"],["KG","KGZ","417","ISO 3166-2:KG"],["LA","LAO","418","ISO 3166-2:LA"],["LV","LVA","428","ISO 3166-2:LV"],["LB","LBN","422","ISO 3166-2:LB"],["LS","LSO","426","ISO 3166-2:LS"],["LR","LBR","430","ISO 3166-2:LR"],["LY","LBY","434","ISO 3166-2:LY"],["LI","LIE","438","ISO 3166-2:LI"],["LT","LTU","440","ISO 3166-2:LT"],["LU","LUX","442","ISO 3166-2:LU"],["MO","MAC","446","ISO 3166-2:MO"],["MG","MDG","450","ISO 3166-2:MG"],["MW","MWI","454","ISO 3166-2:MW"],["MY","MYS","458","ISO 3166-2:MY"],["MV","MDV","462","ISO 3166-2:MV"],["ML","MLI","466","ISO 3166-2:ML"],["MT","MLT","470","ISO 3166-2:MT"],["MH","MHL","584","ISO 3166-2:MH"],["MQ","MTQ","474","ISO 3166-2:MQ"],["MR","MRT","478","ISO 3166-2:MR"],["MU","MUS","480","ISO 3166-2:MU"],["YT","MYT","175","ISO 3166-2:YT"],["MX","MEX","484","ISO 3166-2:MX"],["FM","FSM","583","ISO 3166-2:FM"],["MD","MDA","498","ISO 3166-2:MD"],["MC","MCO","492","ISO 3166-2:MC"],["MN","MNG","496","ISO 3166-2:MN"],["MS","MSR","500","ISO 3166-2:MS"],["MA","MAR","504","ISO 3166-2:MA"],["MZ","MOZ","508","ISO 3166-2:MZ"],["MM","MMR","104","ISO 3166-2:MM"],["NA","NAM","516","ISO 3166-2:NA"],["NR","NRU","520","ISO 3166-2:NR"],["NP","NPL","524","ISO 3166-2:NP"],["NL","NLD","528","ISO 3166-2:NL"],["NC","NCL","540","ISO 3166-2:NC"],["NZ","NZL","554","ISO 3166-2:NZ"],["NI","NIC","558","ISO 3166-2:NI"],["NE","NER","562","ISO 3166-2:NE"],["NG","NGA","566","ISO 3166-2:NG"],["NU","NIU","570","ISO 3166-2:NU"],["NF","NFK","574","ISO 3166-2:NF"],["MP","MNP","580","ISO 3166-2:MP"],["MK","MKD","807","ISO 3166-2:MK"],["NO","NOR","578","ISO 3166-2:NO"],["OM","OMN","512","ISO 3166-2:OM"],["PK","PAK","586","ISO 3166-2:PK"],["PW","PLW","585","ISO 3166-2:PW"],["PS","PSE","275","ISO 3166-2:PS"],["PA","PAN","591","ISO 3166-2:PA"],["PG","PNG","598","ISO 3166-2:PG"],["PY","PRY","600","ISO 3166-2:PY"],["PE","PER","604","ISO 3166-2:PE"],["PH","PHL","608","ISO 3166-2:PH"],["PN","PCN","612","ISO 3166-2:PN"],["PL","POL","616","ISO 3166-2:PL"],["PT","PRT","620","ISO 3166-2:PT"],["PR","PRI","630","ISO 3166-2:PR"],["QA","QAT","634","ISO 3166-2:QA"],["RE","REU","638","ISO 3166-2:RE"],["RO","ROU","642","ISO 3166-2:RO"],["RU","RUS","643","ISO 3166-2:RU"],["RW","RWA","646","ISO 3166-2:RW"],["SH","SHN","654","ISO 3166-2:SH"],["KN","KNA","659","ISO 3166-2:KN"],["LC","LCA","662","ISO 3166-2:LC"],["PM","SPM","666","ISO 3166-2:PM"],["VC","VCT","670","ISO 3166-2:VC"],["WS","WSM","882","ISO 3166-2:WS"],["SM","SMR","674","ISO 3166-2:SM"],["ST","STP","678","ISO 3166-2:ST"],["SA","SAU","682","ISO 3166-2:SA"],["SN","SEN","686","ISO 3166-2:SN"],["SC","SYC","690","ISO 3166-2:SC"],["SL","SLE","694","ISO 3166-2:SL"],["SG","SGP","702","ISO 3166-2:SG"],["SK","SVK","703","ISO 3166-2:SK"],["SI","SVN","705","ISO 3166-2:SI"],["SB","SLB","090","ISO 3166-2:SB"],["SO","SOM","706","ISO 3166-2:SO"],["ZA","ZAF","710","ISO 3166-2:ZA"],["GS","SGS","239","ISO 3166-2:GS"],["ES","ESP","724","ISO 3166-2:ES"],["LK","LKA","144","ISO 3166-2:LK"],["SD","SDN","729","ISO 3166-2:SD"],["SR","SUR","740","ISO 3166-2:SR"],["SJ","SJM","744","ISO 3166-2:SJ"],["SZ","SWZ","748","ISO 3166-2:SZ"],["SE","SWE","752","ISO 3166-2:SE"],["CH","CHE","756","ISO 3166-2:CH"],["SY","SYR","760","ISO 3166-2:SY"],["TW","TWN","158","ISO 3166-2:TW"],["TJ","TJK","762","ISO 3166-2:TJ"],["TZ","TZA","834","ISO 3166-2:TZ"],["TH","THA","764","ISO 3166-2:TH"],["TL","TLS","626","ISO 3166-2:TL"],["TG","TGO","768","ISO 3166-2:TG"],["TK","TKL","772","ISO 3166-2:TK"],["TO","TON","776","ISO 3166-2:TO"],["TT","TTO","780","ISO 3166-2:TT"],["TN","TUN","788","ISO 3166-2:TN"],["TR","TUR","792","ISO 3166-2:TR"],["TM","TKM","795","ISO 3166-2:TM"],["TC","TCA","796","ISO 3166-2:TC"],["TV","TUV","798","ISO 3166-2:TV"],["UG","UGA","800","ISO 3166-2:UG"],["UA","UKR","804","ISO 3166-2:UA"],["AE","ARE","784","ISO 3166-2:AE"],["GB","GBR","826","ISO 3166-2:GB"],["US","USA","840","ISO 3166-2:US"],["UM","UMI","581","ISO 3166-2:UM"],["UY","URY","858","ISO 3166-2:UY"],["UZ","UZB","860","ISO 3166-2:UZ"],["VU","VUT","548","ISO 3166-2:VU"],["VE","VEN","862","ISO 3166-2:VE"],["VN","VNM","704","ISO 3166-2:VN"],["VG","VGB","092","ISO 3166-2:VG"],["VI","VIR","850","ISO 3166-2:VI"],["WF","WLF","876","ISO 3166-2:WF"],["EH","ESH","732","ISO 3166-2:EH"],["YE","YEM","887","ISO 3166-2:YE"],["ZM","ZMB","894","ISO 3166-2:ZM"],["ZW","ZWE","716","ISO 3166-2:ZW"],["AX","ALA","248","ISO 3166-2:AX"],["BQ","BES","535","ISO 3166-2:BQ"],["CW","CUW","531","ISO 3166-2:CW"],["GG","GGY","831","ISO 3166-2:GG"],["IM","IMN","833","ISO 3166-2:IM"],["JE","JEY","832","ISO 3166-2:JE"],["ME","MNE","499","ISO 3166-2:ME"],["BL","BLM","652","ISO 3166-2:BL"],["MF","MAF","663","ISO 3166-2:MF"],["RS","SRB","688","ISO 3166-2:RS"],["SX","SXM","534","ISO 3166-2:SX"],["SS","SSD","728","ISO 3166-2:SS"],["XK","XKX","","ISO 3166-2:XK"]]')},8975:(t,e,s)=>{"use strict";var a=s(6796),i=s(5804).Od,o={},n={},r={},l={},c={};function d(t){return String("000"+(t||"")).slice(-3)}function u(t){return r[t]}function h(t){return n[t]}function m(t){var e=d(t);return h(l[e])}function p(t){var e=d(t);return l[e]}function f(t){if("string"==typeof t){if(/^[0-9]*$/.test(t))return p(t);if(2===t.length)return t.toUpperCase();if(3===t.length)return u(t.toUpperCase())}if("number"==typeof t)return p(t)}a.forEach((function(t){var e=t;n[e[0]]=e[1],r[e[1]]=e[0],l[e[2]]=e[0],c[e[0]]=e[2]})),e.zQ=function(t,e){const s=t=>t.toLowerCase(),a=(t,e)=>s(t)===s(e);try{const s=o[e.toLowerCase()];for(const e in s)if(b(s,e)){if("string"==typeof s[e]&&a(s[e],t))return e;if(Array.isArray(s[e]))for(const i of s[e])if(a(i,t))return e}return}catch(t){return}};const b=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},3492:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>E});var a=s(1560),i=s(2394),o=s(9081),n=s(3425);const r={components:{"form-input":function(){return Promise.all([s.e(5816),s.e(1531)]).then(s.bind(s,9339))},"form-option":function(){return Promise.all([s.e(5816),s.e(6940)]).then(s.bind(s,4146))},"form-select":function(){return Promise.all([s.e(5816),s.e(4014)]).then(s.bind(s,7449))}},props:{defaultData:{type:Object,required:!0},countryId:{type:Number,required:!0}},mounted:function(){var t=this;Object.keys(this.validity).forEach((function(e){t.$root.$on("".concat(e,"-error"),(function(){t.validity[e]=!1})),t.$root.$on("".concat(e,"-valid"),(function(){t.validity[e]=!0})),t.$root.$on("".concat(e,"-value"),(function(s){t.formData[e]=s})),t.$root.$on("".concat(e,"-change"),(function(s){t.formData[e]=s})),""!==t.defaultData[e]&&t.$root.$emit("".concat(e,"-set-value"),t.defaultData[e])})),Object.values(this.defaultData).includes("")||Object.values(this.defaultData).filter((function(t){return""===t})).length===Object.values(this.defaultData).length||this.validateForm()},methods:{submitForm:function(t){this.validateForm()&&this.$root.$emit("checkout-continue",{id:t,data:this.formData})},goBack:function(){this.$root.$emit("checkout-back")},validateForm:function(){var t=this;Object.keys(this.validity).forEach((function(e){t.validity[e]=!0,t.$root.$emit("".concat(e,"-validate"))}));var e=!0;return Object.keys(this.validity).forEach((function(s){!1===t.validity[s]&&(e=!1)})),e}},computed:{isDisabled:function(){return Object.values(this.validity).includes(!1)}},watch:{validity:{deep:!0,handler:function(){this.$root.$emit("payment-button-disabled",this.isDisabled)}}}},l={mixins:[r],data:function(){return{formData:{name:"",email:"",emailConfirmation:"",phone:""},validity:{name:!1,email:!1,emailConfirmation:!1,phone:!0}}}};var c=s(1900);const d=(0,c.Z)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex flex-col leading-none"},[s("div",{staticClass:"py-1"},[s("form-input",{attrs:{required:"",placeholder:"Your Name",name:"name",value:t.formData.name}})],1),t._v(" "),s("div",{staticClass:"py-1"},[s("form-input",{attrs:{required:"",type:"email",placeholder:"Your Email",name:"email",value:t.formData.email}})],1),t._v(" "),s("div",{staticClass:"py-1"},[s("form-input",{attrs:{required:"",type:"email",placeholder:"Confirm your Email",name:"emailConfirmation",value:t.formData.emailConfirmation,match:t.formData.email}})],1),t._v(" "),s("div",{staticClass:"py-1"},[s("form-input",{attrs:{type:"tel",placeholder:"Your Phone Number (Optional)",name:"phone",value:t.formData.phone,pattern:/[0-9\-+ ]+/}})],1),t._v(" "),s("div",{staticClass:"py-1 text-right"},[s("button",{staticClass:"py-3 px-6 rounded-lg font-semibold",class:t.isDisabled?"bg-yellow-50 cursor-not-allowed":"bg-yellow",attrs:{disabled:t.isDisabled},on:{click:function(e){return t.submitForm("user-details")}}},[t._v("\n            Next...\n        ")])])])}),[],!1,null,null,null).exports;const u={mixins:[r,n.Z],data:function(){return{savedAddresses:[],displayLookup:!1,lookupResults:[],formData:{id:null,postcode:"",address1:"",address2:"",address3:"",town:""},validity:{id:!1,postcode:!1,address1:!1,address2:!0,address3:!0,town:!1}}},mounted:function(){this.isLoggedIn()&&this.userHasVerifiedEmail()&&(this.getUsersAddresses(),this.defaultData.id&&(this.$root.$emit("disable-country-change"),this.formData.id=this.defaultData.id))},methods:{getUsersAddresses:function(){var t=this;this.savedAddresses=[],coeliac().request().get("/api/member/addresses").then((function(e){t.savedAddresses=e.data.filter((function(t){return"Shipping"===t.type}))})).catch((function(){}))},formatAddress:function(t){return Array.from(["line_1","line_2","line_3","town","postcode","country"].map((function(e){return t[e]}))).filter((function(t){return null!==t&&""!==t})).join(", ")},validateForm:function(){return!!this.formData.id||r.methods.validateForm.call(this)},selectSavedAddress:function(t){if(this.formData.id===t.id)return this.$root.$emit("enable-country-change"),this.formData.id=null,this.formData.address1="",this.formData.address2="",this.formData.address3="",this.formData.town="",this.formData.postcode="",void this.updateSessionStorage();this.formData.address1=t.line_1,this.formData.address2=t.line_2,this.formData.address3=t.line_3,this.formData.town=t.town,this.formData.postcode=t.postcode,this.$root.$emit("set-customer-name",t.name),this.$root.$emit("disable-country-change"),this.formData.id=t.id,this.$root.$emit("select-country",t.country),this.updateSessionStorage()},updateSessionStorage:function(){var t=JSON.parse(sessionStorage.getItem("checkout-data"));t[1].data.id=this.formData.id,sessionStorage.setItem("checkout-data",JSON.stringify(t))},lookupPostcode:function(){var t=this;this.validity.postcode?coeliac().request().post("/api/shop/lookup",{postcode:this.formData.postcode}).then((function(e){if(200===e.status)return t.lookupResults=e.data.data,void(t.displayLookup=!0);coeliac().error("There was an error looking up this postcode")})).catch((function(){coeliac().error("There was an error looking up this postcode")})):coeliac().error("Please enter a valid UK Postcode or change the delivery country above!")},selectLookupResult:function(t){var e=this;this.formData.address1=t.address_1,this.formData.address2=t.address_2||"",this.formData.address3=t.address_3||"",this.formData.town=t.town,this.formData.postcode=t.postcode,this.displayLookup=!1,this.lookupResults=[],Object.keys(this.validity).forEach((function(t){e.$root.$emit("".concat(t,"-set-value"),e.formData[t])}))},canLookupPostcode:function(){return 1===this.countryId}},computed:{isDisabled:function(){return!this.formData.id&&Object.values(this.validity).includes(!1)},postcodePattern:function(){return this.canLookupPostcode()?/^[A-Z]{1,2}\d[A-Z\d]? ?\d[A-Z]{2}$/i:/.*/}},watch:{displayLookup:function(t){t?document.querySelector("body").classList.add("overflow-hidden"):document.querySelector("body").classList.remove("overflow-hidden")}}};const h=(0,c.Z)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex flex-col"},[t.savedAddresses.length>0?s("div",[s("p",{staticClass:"text-lg mb-3 font-semibold"},[t._v("Choose Saved Address")]),t._v(" "),s("div",{staticClass:"flex flex-col space-y-3"},t._l(t.savedAddresses,(function(e){return s("div",{staticClass:"p-2 flex flex-col cursor-pointer transition-bg",class:e.id===t.formData.id?"bg-blue-light-20 border-yellow border-4 text-black":"border text-black-50 bg-blue-light-50 border-white-80 hover:bg-blue-light-80 hover:border-white",on:{click:function(s){return t.selectSavedAddress(e)}}},[s("span",{staticClass:"font-semibold"},[t._v(t._s(e.name))]),t._v(" "),s("span",[t._v(t._s(t.formatAddress(e)))])])})),0)]):t._e(),t._v(" "),null===t.formData.id?s("div",{staticClass:"flex flex-col leading-none"},[t.savedAddresses.length>0?s("p",{staticClass:"text-lg my-3 font-semibold"},[t._v("Or Add New Address")]):t._e(),t._v(" "),s("div",{staticClass:"py-1 flex relative"},[s("form-input",{staticClass:"flex-1",attrs:{required:"",placeholder:"Postcode",name:"postcode",pattern:t.postcodePattern,"pattern-error":"Please enter a valid UK Postcode",disabled:!!t.formData.id,value:t.formData.postcode}}),t._v(" "),t.canLookupPostcode()?s("button",{staticClass:"py-2 px-4 text-sm rounded-lg font-semibold bg-yellow ml-2",attrs:{disabled:!!t.formData.id},on:{click:function(e){return t.lookupPostcode()}}},[t._v("\n                Search\n            ")]):t._e(),t._v(" "),t.canLookupPostcode()&&t.displayLookup?s("div",{staticClass:"absolute w-full bg-grey-lightest border border-grey shadow max-h-map scrollable",staticStyle:{top:"100%"}},t._l(t.lookupResults,(function(e){return s("ul",[s("li",{staticClass:"p-2 border-b border-grey cursor-pointer hover:bg-grey-off-light transition-bg",on:{click:function(s){return t.selectLookupResult(e)}}},[t._v("\n                        "+t._s(e.friendly)+"\n                    ")])])})),0):t._e()],1),t._v(" "),s("div",{staticClass:"py-1"},[s("form-input",{attrs:{required:"",placeholder:"Address Line 1",name:"address1",value:t.formData.address1,disabled:!!t.formData.id}})],1),t._v(" "),s("div",{staticClass:"py-1"},[s("form-input",{attrs:{placeholder:"Address Line 2 (Optional)",name:"address2",value:t.formData.address2,disabled:!!t.formData.id}})],1),t._v(" "),s("div",{staticClass:"py-1"},[s("form-input",{attrs:{placeholder:"Address Line 3 (Optional)",name:"address3",value:t.formData.address3,disabled:!!t.formData.id}})],1),t._v(" "),s("div",{staticClass:"py-1"},[s("form-input",{attrs:{required:"",placeholder:"Town/City",name:"town",value:t.formData.town,disabled:!!t.formData.id}})],1)]):t._e(),t._v(" "),s("div",{staticClass:"py-1 flex justify-between"},[s("button",{staticClass:"py-3 px-6 rounded-lg font-semibold bg-yellow",on:{click:function(e){return t.goBack()}}},[t._v("\n            Back...\n        ")]),t._v(" "),s("button",{staticClass:"py-3 px-6 rounded-lg font-semibold",class:t.isDisabled?"bg-yellow-50 cursor-not-allowed":"bg-yellow",attrs:{disabled:t.isDisabled},on:{click:function(e){return t.submitForm("shipping-address")}}},[t._v("\n            Next...\n        ")])])])}),[],!1,null,null,null).exports;var m=s(2840),p=s(8975);const f={mixins:[o.Z],data:function(){return{stripe:null,stripeElements:null,cardElement:null,checkoutData:null,isDisabled:!0,hasStartedPayment:!1}},mounted:function(){var t=this;this.$root.$on("payment-button-disabled",(function(e){t.isDisabled=e})),(0,m.v)("https://js.stripe.com/v3/").then((function(){t.stripe=new Stripe(window.config.shop.stripe),t.stripeElements=t.stripe.elements(),t.cardElement=t.stripeElements.create("card",{classes:{base:"text-base border border-blue rounded bg-grey-lightest w-full p-3 m-0 text-grey-darkest text-grey-light"},hidePostalCode:!0}),t.cardElement.mount("#stripe"),t.cardElement.on("change",(function(e){t.$root.$emit(e.complete?"card-valid":"card-error")}))})),this.$root.$on("initiate-payment",(function(e){t.checkoutData=e,t.executePayment()}))},methods:{initiatePayment:function(){this.$root.$emit("prepare-payment")},executePayment:function(){var t=this;this.hasStartedPayment?this.stripeError():(this.hasStartedPayment=!0,this.isDisabled=!0,this.googleEvent("event","set-checkout-option",{event_label:"stripe"}),this.stripe.createPaymentMethod("card",this.cardElement,{billing_details:{name:this.checkoutData.user.name,address:{line1:this.checkoutData.billing.address1,line2:this.checkoutData.billing.address2,city:this.checkoutData.billing.town,postal_code:this.checkoutData.billing.postcode,country:(0,p.zQ)(sessionStorage.getItem("checkout-country"),"en")}}}).then((function(e){if(e.error)return t.hasStartedPayment=!1,t.stripeError();t.checkoutData.payment={provider:"stripe",token:e.paymentMethod.id},coeliac().request().post("/api/shop/order",t.checkoutData).then((function(e){if(200===e.status)return t.confirmResponse(e);t.stripeError(),t.hasStartedPayment=!1})).catch((function(e){console.log(e),t.stripeError(),t.hasStartedPayment=!1}))})))},confirmResponse:function(t){t.data.success?this.$root.$emit("complete-order"):t.data.requires_action&&this.validatePayment(t.data.client_secret,t.data.payment_id)},stripeError:function(){this.isDisabled=!1,this.$root.$emit("hide-page-load"),coeliac().error("There was an completing your order, you have not been charged, please check all fields and try again...")},validatePayment:function(t,e){var s=this;this.stripe.handleCardAction(t).then((function(t){if(t.error)return s.stripeError();coeliac().request().patch("/api/shop/order",{payment:{provider:"stripe",token:e}}).then((function(t){if(200===t.status)return s.confirmResponse(t);s.stripeError(),s.hasStartedPayment=!1})).catch((function(t){console.log(t),s.stripeError(),s.hasStartedPayment=!1}))}))}}};const b=(0,c.Z)(f,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._m(0),t._v(" "),s("div",{staticClass:"py-1 mt-4"},[s("button",{staticClass:"py-3 px-6 rounded-lg font-semibold w-full",class:t.isDisabled?"bg-yellow-50 cursor-not-allowed":"bg-yellow",attrs:{disabled:t.isDisabled},on:{click:function(e){return t.initiatePayment()}}},[t._v("\n            Pay Now\n        ")])])])}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"py-1 mt-4"},[s("span",{staticClass:"block font-semibold text-lg mb-2"},[t._v("\n            Payment Details\n        ")]),t._v(" "),s("div",{attrs:{id:"stripe"}})])}],!1,null,null,null).exports;const S={mixins:[o.Z],data:function(){return{paypalResolver:null}},mounted:function(){var t=this;this.$root.$on("initiate-payment",(function(e){t.checkoutData=e,t.executePayment()})),(0,m.v)("https://www.paypalobjects.com/api/checkout.js").then((function(){paypal.Button.render({env:window.config.shop.paypal,style:{size:"medium"},commit:!0,payment:function(e){t.$root.$emit("prepare-payment"),t.paypalResolver=e},onAuthorize:function(e){t.processPayment(e)},onCancel:function(){t.paypalError()},onError:function(){t.paypalError()}},"#paypal-button")}))},methods:{paypalError:function(){this.$root.$emit("hide-page-load"),coeliac().error("There was an completing your order, you have not been charged, please check all fields and try again...")},executePayment:function(){var t=this;this.checkoutData.payment={provider:"paypal"},this.googleEvent("event","set-checkout-option",{event_label:"paypal"}),coeliac().request().post("/api/shop/order",this.checkoutData).then((function(e){200!==e.status?t.paypalError():t.paypalResolver(e.data.id)})).catch((function(){t.paypalError()}))},processPayment:function(t){var e=this;coeliac().request().patch("/api/shop/order",{payment:{provider:"paypal",id:t.paymentID,payer:t.payerID}}).then((function(t){200!==t.status||"approved"!==t.data.state?e.paypalError():e.$root.$emit("complete-order")})).catch((function(){e.paypalError()}))}}};const v=(0,c.Z)(S,(function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"py-1 mt-4"},[e("div",{attrs:{id:"paypal-button"}})])}],!1,null,null,null).exports,g={mixins:[r,n.Z],components:{"stripe-checkout":b,"paypal-checkout":v},data:function(){return{paymentProviders:[{value:"stripe",label:"by Credit / Debit Card"},{value:"paypal",label:"by PayPal"}],billingOptions:[{value:"1",label:"Same as Shipping Address"},{value:"0",label:"Other"}],savedAddresses:[],formData:{provider:"",shippingAddress:"1",billingId:"",billingName:"",billingAddress1:"",billingAddress2:"",billingAddress3:"",billingTown:"",billingPostcode:"",billingCountry:""},validity:{provider:!1,shippingAddress:!0,billingId:!0,billingName:!0,billingAddress1:!0,billingAddress2:!0,billingAddress3:!0,billingTown:!0,billingPostcode:!0,billingCountry:!0,card:!1}}},mounted:function(){var t=this;this.isLoggedIn()&&this.userHasVerifiedEmail()&&(this.getUsersAddresses(),this.defaultData.id&&(this.formData.billingId=this.defaultData.billingId)),this.$root.$emit("shippingAddress-set-value","1"),this.$root.$on("prepare-payment",(function(){t.initiatePayment()})),this.$root.$on("complete-order",(function(){t.completeOrder()})),Object.keys(this.validity).forEach((function(e){e.includes("billing")&&(t.formData[e]=t.defaultData[e],t.$root.$emit("".concat(e,"-set-value"),t.defaultData[e]))}))},methods:{getUsersAddresses:function(){var t=this;this.savedAddresses=[],coeliac().request().get("/api/member/addresses").then((function(e){t.savedAddresses=e.data.filter((function(t){return"Billing"===t.type}))})).catch((function(){}))},formatAddress:function(t){return Array.from(["line_1","line_2","line_3","town","postcode","country"].map((function(e){return t[e]}))).filter((function(t){return null!==t&&""!==t})).join(", ")},selectSavedAddress:function(t){if(this.formData.billingId===t.id)return this.formData.billingId=null,this.formData.billingName="",this.formData.billingAddress1="",this.formData.billingAddress2="",this.formData.billingAddress3="",this.formData.billingTown="",this.formData.billingPostcode="",this.formData.billingCountry="",void this.updateSessionStorage();this.formData.billingId=t.id,this.formData.billingName=t.name,this.formData.billingAddress1=t.line_1,this.formData.billingAddress2=t.line_2,this.formData.billingAddress3=t.line_3,this.formData.billingTown=t.town,this.formData.billingPostcode=t.postcode,this.formData.billingCountry=t.country,this.updateSessionStorage()},validateForm:function(){return!!this.formData.billingId||r.methods.validateForm.call(this)},updateSessionStorage:function(){var t=JSON.parse(sessionStorage.getItem("checkout-data"));t[2].data.id=this.formData.billingId,sessionStorage.setItem("checkout-data",JSON.stringify(t)),this.$root.$emit("payment-button-disabled",this.isDisabled)},initiatePayment:function(){this.$root.$emit("full-page-load"),this.validateForm()&&this.$root.$emit("initiate-payment",this.bundleData())},completeOrder:function(){sessionStorage.removeItem("checkout-data"),sessionStorage.removeItem("checkout-country"),window.location.href="/shop/basket/done"},bundleData:function(){var t=JSON.parse(sessionStorage.getItem("checkout-data"));return{user:{name:t[0].data.name,email:t[0].data.email,emailConfirmation:t[0].data.emailConfirmation,phone:t[0].data.phone},shipping:{id:t[1].data.id,address1:t[1].data.address1,address2:t[1].data.address2,address3:t[1].data.address3,town:t[1].data.town,postcode:t[1].data.postcode,country:sessionStorage.getItem("checkout-country")},billing:{name:this.formData.billingName,id:this.formData.billingId,address1:this.formData.billingAddress1,address2:this.formData.billingAddress2,address3:this.formData.billingAddress3,town:this.formData.billingTown,postcode:this.formData.billingPostcode,country:this.formData.billingCountry}}}},watch:{"formData.shippingAddress":function(t){var e=this;this.$root.$emit("shippingAddress-set-value",t),"1"!==t?Object.keys(this.validity).forEach((function(t){t.includes("billing")&&(e.formData[t]="",e.$root.$emit("".concat(t,"-set-value"),""),"billingAddress2"!==t&&"billingAddress3"!==t&&(e.$root.$emit("".concat(t,"-error")),e.$root.$emit("".concat(t,"-validate"))))})):Object.keys(this.validity).forEach((function(t){t.includes("billing")&&(e.formData[t]=e.defaultData[t],e.$root.$emit("".concat(t,"-set-value"),e.defaultData[t]),e.$root.$emit("".concat(t,"-valid")),e.$root.$emit("".concat(t,"-validate")))}))}},computed:{isDisabled:function(){return!this.formData.billingId&&Object.values(this.validity).includes(!1)}}};const I=(0,c.Z)(g,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex flex-col leading-none"},[s("div",{staticClass:"py-1"},[s("form-option",{attrs:{required:"",name:"provider",label:"Payment Method",value:t.formData.provider,options:t.paymentProviders}})],1),t._v(" "),"stripe"===t.formData.provider?[s("div",{staticClass:"py-1"},[s("form-select",{attrs:{required:"",label:"Billing Address",name:"shippingAddress",value:t.formData.shippingAddress,options:t.billingOptions}})],1),t._v(" "),"0"===t.formData.shippingAddress?[t.savedAddresses.length>0?s("div",[s("p",{staticClass:"text-lg mb-3 font-semibold"},[t._v("Choose Saved Address")]),t._v(" "),s("div",{staticClass:"flex flex-col space-y-3"},t._l(t.savedAddresses,(function(e){return s("div",{staticClass:"p-2 flex flex-col cursor-pointer transition-bg",class:e.id===t.formData.billingId?"bg-blue-light-20 border-yellow border-4 text-black":"border text-black-50 bg-blue-light-50 border-white-80 hover:bg-blue-light-80 hover:border-white",on:{click:function(s){return t.selectSavedAddress(e)}}},[s("span",{staticClass:"font-semibold"},[t._v(t._s(e.name))]),t._v(" "),s("span",[t._v(t._s(t.formatAddress(e)))])])})),0)]):t._e(),t._v(" "),null===t.formData.billingId?s("div",[t.savedAddresses.length>0?s("p",{staticClass:"text-lg my-3 font-semibold"},[t._v("Or Add New Address")]):t._e(),t._v(" "),s("div",{staticClass:"py-1"},[s("form-input",{attrs:{required:"",placeholder:"Billing Name",name:"billingName",value:t.formData.billingName}})],1),t._v(" "),s("div",{staticClass:"py-1"},[s("form-input",{attrs:{required:"",placeholder:"Billing Address Line 1",name:"billingAddress1",value:t.formData.billingAddress1}})],1),t._v(" "),s("div",{staticClass:"py-1"},[s("form-input",{attrs:{placeholder:"Billing Address Line 2 (Optional)",name:"billingAddress2",value:t.formData.billingAddress2}})],1),t._v(" "),s("div",{staticClass:"py-1"},[s("form-input",{attrs:{placeholder:"Billing Address Line 3 (Optional)",name:"billingAddress3",value:t.formData.billingAddress3}})],1),t._v(" "),s("div",{staticClass:"py-1"},[s("form-input",{attrs:{required:"",placeholder:"Town/City",name:"billingTown",value:t.formData.billingTown}})],1),t._v(" "),s("div",{staticClass:"py-1"},[s("form-input",{attrs:{required:"",placeholder:"Billing Postcode",name:"billingPostcode",value:t.formData.billingPostcode}})],1),t._v(" "),s("div",{staticClass:"py-1"},[s("form-input",{attrs:{required:"",placeholder:"Billing Country",name:"billingCountry",value:t.formData.billingCountry}})],1)]):t._e()]:t._e(),t._v(" "),s("stripe-checkout")]:t._e(),t._v(" "),"paypal"===t.formData.provider?[s("paypal-checkout")]:t._e()],2)}),[],!1,null,null,null).exports,O={mixins:[o.Z,n.Z],props:{countryId:{type:Number,required:!0}},components:{"basket-checkout-user-details":d,"basket-checkout-shipping-details":h,"basket-checkout-payment-details":I},mounted:function(){var t=this;this.isLoggedIn()&&(this.sections[0].enabled=!1,this.sections[0].active=!1,this.sections[1].active=!0),sessionStorage.getItem("checkout-data")?this.sections=JSON.parse(sessionStorage.getItem("checkout-data")):sessionStorage.setItem("checkout-data",JSON.stringify(this.sections)),this.$root.$on("checkout-continue",(function(e){t.completeSection(e)})),this.$root.$on("checkout-back",(function(){t.goBack()})),this.$root.$on("set-customer-name",(function(e){t.sections[0].data.name=e}))},data:function(){return{sections:[{id:"user-details",title:"Your Details",component:"basket-checkout-user-details",enabled:!0,completed:!0,active:!0,canVisit:!1,data:{name:"",email:"",emailConfirmation:"",phone:""}},{id:"shipping-address",title:"Shipping Address",component:"basket-checkout-shipping-details",enabled:!0,completed:!1,active:!1,canVisit:!1,data:{id:null,postcode:"",address1:"",address2:"",address3:"",town:"",billingAddress:!0}},{id:"payment",title:"Payment",component:"basket-checkout-payment-details",enabled:!0,completed:!1,active:!1,canVisit:!1,data:{provider:"",shippingAddress:"1",billingId:null,billingName:"",billingAddress1:"",billingAddress2:"",billingAddress3:"",billingTown:"",billingPostcode:"",billingCountry:""}},{id:"confirmation",title:"Confirmation",component:"",enabled:!0,completed:!1,active:!1,canVisit:!1,data:{}}]}},methods:{headerCircleBackground:function(t){return t.completed||t.active?"bg-yellow":t.canVisit?"bg-white":"bg-grey-off-dark"},completeSection:function(t){var e=this.sections.findIndex((function(e){return e.id===t.id}));this.sections[e].data=t.data,this.sections[e].completed=!0,this.sections[e].active=!1,this.sections[e].canVisit=!0,this.sections[e+1].active=!0,this.sections[e+1].canVisit=!0,"shipping-address"===this.sections[e].id&&!1===this.sections[2].completed&&(this.sections[2].data={provider:"",shippingAddress:"1",billingName:this.sections[0].data.name,billingAddress1:this.sections[1].data.address1,billingAddress2:this.sections[1].data.address2,billingAddress3:this.sections[1].data.address3,billingTown:this.sections[1].data.town,billingPostcode:this.sections[1].data.postcode,billingCountry:sessionStorage.getItem("checkout-country")}),sessionStorage.setItem("checkout-data",JSON.stringify(this.sections))},goBack:function(){var t=this.sections.findIndex((function(t){return!0===t.active}));0!==t&&(this.sections[t].active=!1,this.sections[t-1].active=!0)},switchSection:function(t){!0===t.canVisit&&(this.sections.find((function(t){return!0===t.active})).active=!1,this.sections.find((function(e){return e.id===t.id})).active=!0,this.googleEvent("event","checkout-progress",{event_label:t.title}))}},computed:{activeComponent:function(){return this.sections.find((function(t){return!0===t.active})).component},currentData:function(){return this.sections.find((function(t){return!0===t.active})).data}}};const y=(0,c.Z)(O,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-blue-gradient w-full rounded-lg p-2 shadow mx-auto max-w-11/12"},[s("div",{staticClass:"flex flex-col xs:flex-row xs:justify-between xs:pt-4 mb-4"},[t._l(t.sections,(function(e){return e.enabled?[s("div",{staticClass:"flex xs:flex-col xs:flex-1",class:e.canVisit?"cursor-pointer":"",on:{click:function(s){return t.switchSection(e)}}},[s("div",{staticClass:"px-4 relative xs:px-0"},[s("div",{staticClass:"w-5 h-5 rounded-full absolute text-white",class:t.headerCircleBackground(e),staticStyle:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"}}),t._v(" "),s("div",{staticClass:"border-4 border-yellow h-full"})]),t._v(" "),s("div",{staticClass:"flex-1 py-3 xs:text-center",class:e.completed||e.active||e.canVisit?"font-semibold text-black":"text-grey"},[t._v("\n                    "+t._s(e.title)+"\n                ")])])]:t._e()}))],2),t._v(" "),s("div",[s(t.activeComponent,{tag:"component",attrs:{"default-data":t.currentData,"country-id":t.countryId}})],1)])}),[],!1,null,null,null).exports;const C={mixins:[o.Z],components:{loader:function(){return s.e(8540).then(s.bind(s,1337))},modal:function(){return s.e(5441).then(s.bind(s,3516))},"form-input":function(){return Promise.all([s.e(5816),s.e(1531)]).then(s.bind(s,9339))}},data:function(){return{discountCode:"",loading:!1}},mounted:function(){var t=this;this.googleEvent("event","checkout-progress",{event_category:"opened-discount-modal"}),this.$root.$on("code-change",(function(e){t.discountCode=e}))},methods:{validateCode:function(){var t=this;this.loading=!0,coeliac().request().post("/api/shop/basket/discount",{code:this.discountCode}).then((function(e){if(200===e.status)return t.googleEvent("event","checkout-progress",{event_category:"applied-discount",event_label:t.discountCode}),coeliac().success("Yay! We've validated your ".concat(e.data.name," discount code and added it to your order!")),void t.$root.$emit("basket-discount-code-validated");t.reportError()})).catch((function(){t.reportError()}))},reportError:function(){this.googleEvent("event","checkout-progress",{event_category:"invalid-discount",event_label:this.discountCode}),this.loading=!1,coeliac().error("Sorry, there was an error validating your discount code, please check your code and try again.")}}};const D=(0,c.Z)(C,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("modal",{attrs:{"modal-classes":"w-3/4"}},[s("loader",{attrs:{show:t.loading}}),t._v(" "),s("div",{staticClass:"w-full flex flex-col"},[s("div",{staticClass:"mb-2"},[s("p",[t._v("\n                Lucky enough to have a discount code? Enter it below and we'll validate it and add it to your order!\n            ")])]),t._v(" "),s("div",{staticClass:"mb-2"},[s("form-input",{attrs:{name:"code",placeholder:"Enter your discount code...",value:t.discountCode,required:""}})],1),t._v(" "),s("div",{staticClass:"text-center"},[s("button",{staticClass:"w-full bg-yellow rounded-lg py-2 px-4 font-semibold",on:{click:function(e){return t.validateCode()}}},[t._v("\n                Validate Discount Code\n            ")])])])],1)}),[],!1,null,null,null).exports;const A={mixins:[a.Z],components:{"form-select":function(){return Promise.all([s.e(5816),s.e(4014)]).then(s.bind(s,7449))}},props:{subtotal:{required:!0,type:Number},postage:{required:!0,type:Number},total:{required:!0,type:Number},country:{required:!0,type:Number},dispatch:{required:!0,type:String},discount:{required:!0,type:Object|Array}},data:function(){return{countries:[],selectedCountry:[],disabledChange:!1}},mounted:function(){var t=this;this.selectedCountry=this.country,this.getCountries(),sessionStorage.getItem("checkout-country")||sessionStorage.setItem("checkout-country","United Kingdom"),this.$root.$on("country-change",(function(e){e.toString()!==t.selectedCountry.toString()&&(t.selectedCountry=e,t.selectCountry(e),sessionStorage.setItem("checkout-country",t.countries.find((function(t){return e===t.value})).label))})),this.$root.$on("select-country",(function(e){var s=t.countries.find((function(t){return t.label===e}));s&&t.$root.$emit("country-change",s.value)})),this.$root.$on("disable-country-change",(function(){t.disabledChange=!0})),this.$root.$on("enable-country-change",(function(){t.disabledChange=!1}))},methods:{getCountries:function(){var t=this;coeliac().request().get("/api/shop/countries").then((function(e){200===e.status&&t.$set(t,"countries",e.data)}))},selectCountry:function(t){var e=this;coeliac().request().post("/api/shop/countries",{country:t}).then((function(t){200!==t.status?coeliac().error("Sorry, there was an error selecting the country"):e.$root.$emit("basket-updated")})).catch((function(){coeliac().error("Sorry, there was an error selecting the country")}))}}};const _=(0,c.Z)(A,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-yellow rounded-lg p-2"},[s("table",{staticClass:"w-full text-lg"},[s("tr",[s("td",[t._v("Subtotal")]),t._v(" "),s("td",{staticClass:"text-right",domProps:{innerHTML:t._s(t.formatPrice(t.subtotal))}})]),t._v(" "),t.discount&&Object.keys(t.discount).length>0?s("tr",[s("td",[t._v("\n                "+t._s(t.discount.name)+"\n            ")]),t._v(" "),s("td",{staticClass:"text-right",domProps:{innerHTML:t._s("-"+t.formatPrice(t.discount.deduction))}})]):t._e(),t._v(" "),s("tr",[t.disabledChange?s("td",[t._v("\n                Postage\n            ")]):s("td",[t._v("\n                Postage to\n                "),t.disabledChange?t._e():s("form-select",{attrs:{required:"",name:"country",options:t.countries,value:t.country.toString(),padding:"p-1"}})],1),t._v(" "),s("td",{staticClass:"text-right",domProps:{innerHTML:t._s(t.formatPrice(t.postage))}})]),t._v(" "),s("tr",[s("td",{attrs:{colspan:"2"}},[t._v("\n                Usually dispatched in "+t._s(t.dispatch)+" days\n            ")])]),t._v(" "),s("tr",{staticClass:"text-xl font-semibold"},[s("td",[t._v("Grand Total")]),t._v(" "),s("td",{staticClass:"text-right",domProps:{innerHTML:t._s(t.formatPrice(t.total))}})])])])}),[],!1,null,null,null).exports;const M={mixins:[a.Z,i.Z],components:{"basket-checkout-wrapper":y,"basket-discount-modal":D,"basket-page-totals":_,loader:function(){return s.e(8540).then(s.bind(s,1337))}},data:function(){return{loading:!0,showDiscountModal:!1,data:{items:[],subtotal:0,postage:0,country:1,delivery:"1 - 2",total:0}}},mounted:function(){var t=this;this.getData(),this.$root.$on("product-updated",(function(){t.getData()})),this.$root.$on("basket-updated",(function(){t.getData()})),this.$root.$on("modal-closed",(function(){document.querySelector("body").classList.remove("overflow-hidden"),t.showDiscountModal=!1})),this.$root.$on("basket-discount-code-validated",(function(){document.querySelector("body").classList.remove("overflow-hidden"),t.showDiscountModal=!1,t.getData()}))},methods:{getData:function(){var t=this;this.loading=!0,coeliac().request().get("/api/shop/basket/summary").then((function(e){200===e.status&&(t.data=e.data,t.loading=!1,0===t.data.items.length&&sessionStorage.removeItem("checkout-data"),t.loadLazyImages())}))}}};const E=(0,c.Z)(M,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"relative w-full min-h-map"},[s("loader",{attrs:{show:t.loading}}),t._v(" "),t.loading||0!==t.data.items.length?t._e():s("div",[s("p",[t._v("Sorry, you've got no items in your basket, why not take a look at some of these products instead?")])]),t._v(" "),!t.loading&&t.data.items.length>0?s("div",{staticClass:"flex flex-col"},[s("div",{staticClass:"bg-blue-gradient shadow rounded-lg p-2 mx-auto max-w-11/12"},[s("p",{staticClass:"mb-4"},[t._v("Below are the items in your shopping basket, you can alter quantities and delete items\n                if needed.")]),t._v(" "),s("div",{staticClass:"flex flex-col mb-4"},t._l(t.data.items,(function(e){return s("div",{staticClass:"flex py-2 leading-tight"},[s("div",{staticClass:"w-1/4 pr-2 sm:w-1/5"},[s("img",{staticClass:"lazy",attrs:{"data-src":e.product.first_image,src:t.lazyLoadSrc,loading:"lazy",alt:""}})]),t._v(" "),s("div",{staticClass:"w-3/4 flex flex-col sm:flex-row sm:w-4/5 sm:justify-between"},[s("div",{staticClass:"sm:mr-2"},[s("h3",{staticClass:"text-lg font-semibold mb-1"},[t._v("\n                                "+t._s(e.product.title)+"\n                                "),""!==e.variant.title?s("span",[t._v("("+t._s(e.variant.title)+")")]):t._e()])]),t._v(" "),s("div",{staticClass:"flex mb-1 sm:flex-col sm:mr-2"},[s("div",{staticClass:"font-semibold mr-1 sm:mr-0 sm:mb-2"},[t._v("Price")]),t._v(" "),s("div",{domProps:{innerHTML:t._s(t.formatPrice(e.product_price))}})]),t._v(" "),s("div",{staticClass:"flex mb-1 sm:flex-col sm:mr-2"},[s("div",{staticClass:"font-semibold mr-1 sm:mr-0 sm:mb-2"},[t._v("Quantity")]),t._v(" "),s("div",[s("shop-basket-ui-quantity-switcher",{attrs:{quantity:e.quantity,"product-id":e.product.id,"variant-id":e.variant.id}})],1)]),t._v(" "),s("div",{staticClass:"flex mb-1 sm:flex-col sm:mr-2"},[s("div",{staticClass:"font-semibold mr-1 sm:mr-0 sm:mb-2"},[t._v("Subtotal")]),t._v(" "),s("div",{domProps:{innerHTML:t._s(t.formatPrice(e.subtotal))}})])])])})),0),t._v(" "),t.data.discount!==[]?s("button",{staticClass:"mb-4 -mt-2 py-2 px-4 bg-yellow rounded-lg text-lg text-semibold w-full",on:{click:function(e){t.showDiscountModal=!0}}},[t._v("\n                Got a discount code?\n            ")]):t._e(),t._v(" "),s("basket-page-totals",{attrs:{country:t.data.country,postage:t.data.postage,subtotal:t.data.subtotal,total:t.data.total,dispatch:t.data.delivery,discount:t.data.discount}})],1)]):t._e(),t._v(" "),!t.loading&&t.data.items.length>0?s("div",{staticClass:"flex justify-center mt-4"},[s("basket-checkout-wrapper",{attrs:{"country-id":t.data.country}})],1):t._e(),t._v(" "),t.showDiscountModal?s("portal",{attrs:{to:"modal"}},[s("basket-discount-modal")],1):t._e()],1)}),[],!1,null,null,null).exports},1900:(t,e,s)=>{"use strict";function a(t,e,s,a,i,o,n,r){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=s,c._compiled=!0),a&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),n?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},c._ssrRegister=l):i&&(l=r?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(t,e){return l.call(e),d(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:c}}s.d(e,{Z:()=>a})}}]);