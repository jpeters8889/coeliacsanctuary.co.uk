(self.webpackChunk=self.webpackChunk||[]).push([[199],{4437:(e,t,r)=>{"use strict";function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(t,{Z:()=>i});const i={methods:{buildUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l="page=".concat(t);if(r&&(l+="&search=".concat(r)),i){var a=[];Object.keys(i).forEach((function(e){null!==i[e]&&("object"===s(i[e])?a.push("filter["+e+"]="+i[e].join(",")):a.push("filter["+e+"]="+i[e]))})),l+="&"+a.join("&")}return n&&(l="o="+btoa(l)),e+"?"+l}}}},3923:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(381),i=r.n(s);const n={methods:{formatDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Do MMMM YYYY";return i()(e).format(t)}}}},9081:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});const s={methods:{googleEvent:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};window.gtag&&window.gtag(e,t,r)}}}},2394:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});r(2732);const s={methods:{loadLazyImages:function(){coeliac().updateLazyloader()}},computed:{lazyLoadSrc:function(){return"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 2'%3E%3C/svg%3E"}}}},8978:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const s={props:{show:{type:Boolean,default:!1},width:{type:String,default:"50%"},height:{type:String,default:"50%"},maxWidth:{type:String,default:"50px"},maxHeight:{type:String,default:"50px"},background:{type:String,default:"bg-transparent"},fadedBorderColor:{type:String,default:"border-blue-20"},primaryBorderColor:{type:String,default:"#80CCFC"},backgroundPosition:{type:String,default:"absolute"},borderWidth:{type:String,default:"5px"}},computed:{loaderStyles:function(){return{borderTopColor:this.primaryBorderColor,borderWidth:this.borderWidth,width:this.width,height:this.height,maxWidth:this.maxWidth,maxHeight:this.maxHeight}}}};const i=(0,r(1900).Z)(s,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"top-0 left-0 flex justify-center items-center w-full h-full z-max",class:[e.background,e.backgroundPosition]},[r("div",{staticClass:"rounded-full spin",class:e.fadedBorderColor,style:e.loaderStyles})])}),[],!1,null,null,null).exports},1817:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>$});var s=r(9081),i=r(3923),n=r(4437);const l={blogs:[{label:"Tag",value:"tags"},{label:"Year",value:"year"}],recipes:[{label:"Features",value:"feature"},{label:"Free From",value:"freefrom"},{label:"Meal",value:"meal"}],reviews:[{label:"Rating",value:"ratings"},{label:"County",value:"counties"}]};var a=r(2394),o=r(8978);const c={mixins:[n.Z],props:{currentFilters:{type:Object|Array},currentSearch:{type:String,default:""}},data:function(){return{tags:[],selectedTags:[],years:[],selectedYear:null,searchText:"",accordions:{tags:!1,year:!1}}},mounted:function(){var e=this;this.getData(),this.$root.$on("accordion-toggled",(function(t){void 0!==e.accordions[t.name]&&e.$set(e.accordions,t.name,t.visible)})),this.$root.$on("clear-filters",(function(){e.selectedTags=[],e.selectedYear=""}))},methods:{getData:function(){var e=this;coeliac().request().get(this.buildUrl("/api/blogs/tags",1,this.currentSearch,this.currentFilters)).then((function(t){e.tags=t.data.data,e.selectedTags=[],e.currentFilters&&e.currentFilters.tags.forEach((function(t){e.selectedTags.push(e.tags.filter((function(e){return e.slug===t}))[0])}))})),coeliac().request().get(this.buildUrl("/api/blogs/years",1,this.currentSearch,this.currentFilters)).then((function(t){e.years=t.data.data,e.selectedYear=e.currentFilters.year[0]||null}))},selectTag:function(e){this.selectedTags.push(e),this.$root.$emit("add-filter",{name:"tags",value:e.slug})},selectYear:function(e){this.selectedYear=e,this.$root.$emit("add-filter",{name:"year",value:e,single:!0})},removeTag:function(e){this.selectedTags=this.selectedTags.filter((function(t){return t.slug!==e.slug})),this.$root.$emit("remove-filter",{name:"tags",value:e.slug})},removeYear:function(){var e=this.selectedYear;this.selectedYear=null,this.$root.$emit("remove-filter",{name:"year",value:e})},iconFor:function(e){return this.accordions[e]?"chevron-up":"chevron-down"}},computed:{filteredTags:function(){var e=this;return this.tags.filter((function(t){return""!==e.searchText?t.title.toLowerCase().includes(e.searchText)&&-1===e.selectedTags.indexOf(t):-1===e.selectedTags.indexOf(t)})).slice(0,14)}},watch:{currentFilters:{deep:!0,handler:function(){this.getData()}},currentSearch:{deep:!0,handler:function(){this.getData()}}}};var u=r(1900);const f=(0,u.Z)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("accordion",{attrs:{group:"filters",name:"tags"},scopedSlots:e._u([{key:"title",fn:function(){return[r("div",{staticClass:"border-b border-grey-light p-2"},[r("div",{staticClass:"flex flex-col"},[r("h3",{staticClass:"cursor-pointer text-lg font-medium mt-1 flex justify-between items-center"},[r("span",[e._v("Blog Tags")]),e._v(" "),r("font-awesome-icon",{staticClass:"text-blue",attrs:{icon:["fas",e.iconFor("tags")]}})],1)]),e._v(" "),e.selectedTags.length>0?r("div",{staticClass:"text-grey-dark"},[r("ul",{staticClass:"flex flex-wrap text-sm -m-2px leading-none"},e._l(e.selectedTags,(function(t){return r("li",{staticClass:"rounded-lg bg-blue-light m-2px flex overflow-hidden"},[r("span",{staticClass:"px-3 py-1"},[e._v(e._s(t.title))]),e._v(" "),r("span",{staticClass:"block bg-yellow px-2 py-1 cursor-pointer",on:{click:function(r){return r.stopPropagation(),e.removeTag(t)}}},[r("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)])})),0)]):e._e()])]},proxy:!0},{key:"body",fn:function(){return[r("div",{staticClass:"p-2"},[r("div",{staticClass:"w-full flex mb-1"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchText,expression:"searchText"}],staticClass:"text-sm p-1 flex-1 bg-grey-lightest border border-grey-off rounded w-full",attrs:{type:"search",placeholder:"Search Tags..."},domProps:{value:e.searchText},on:{input:function(t){t.target.composing||(e.searchText=t.target.value)}}})]),e._v(" "),r("ul",e._l(e.filteredTags,(function(t){return r("li",{staticClass:"py-1 border-b border-dashed border-grey-off-dark transition-bg cursor-pointer hover:bg-grey-off-dark",on:{click:function(r){return r.preventDefault(),e.selectTag(t)}}},[r("span",[e._v(e._s(t.title))]),e._v(" "),r("span",{staticClass:"text-xs"},[e._v("("+e._s(t.blogs_count)+" Blogs)")])])})),0)])]},proxy:!0}])}),e._v(" "),r("accordion",{attrs:{group:"filters",name:"year"},scopedSlots:e._u([{key:"title",fn:function(){return[r("div",{staticClass:"border-b border-grey-light p-2"},[r("div",{staticClass:"flex flex-col"},[r("h3",{staticClass:"cursor-pointer text-lg font-medium mt-1 flex justify-between items-center"},[r("span",[e._v("Year Posted")]),e._v(" "),r("font-awesome-icon",{staticClass:"text-blue",attrs:{icon:["fas",e.iconFor("year")]}})],1)]),e._v(" "),e.selectedYear?r("div",{staticClass:"text-grey-dark"},[r("ul",{staticClass:"flex flex-wrap text-sm -m-2px leading-none"},[r("li",{staticClass:"rounded-lg bg-blue-light m-2px flex overflow-hidden"},[r("span",{staticClass:"px-3 py-1"},[e._v(e._s(e.selectedYear))]),e._v(" "),r("span",{staticClass:"block bg-yellow px-2 py-1 cursor-pointer",on:{click:function(t){return t.stopPropagation(),e.removeYear()}}},[r("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)])])]):e._e()])]},proxy:!0},{key:"body",fn:function(){return[r("div",{staticClass:"p-2"},[e.years.length>0?r("ul",e._l(e.years,(function(t){return r("li",{staticClass:"py-1 border-b border-dashed border-grey-off-dark transition-bg cursor-pointer hover:bg-grey-off-dark",on:{click:function(r){return r.preventDefault(),e.selectYear(t.year)}}},[r("span",[e._v(e._s(t.year))]),e._v(" "),r("span",{staticClass:"text-xs"},[e._v("("+e._s(t.blogs_count)+" Blogs)")])])})),0):e._e()])]},proxy:!0}])})],1)}),[],!1,null,null,null).exports;const d={mixins:[n.Z],props:{currentFilters:{type:Object|Array},currentSearch:{type:String,default:""}},data:function(){return{allergens:[],selectedAllergens:[],features:[],selectedFeatures:[],meals:[],selectedMeals:[],accordions:{freefrom:!1,meals:!1,features:!1}}},mounted:function(){var e=this;this.getData(),this.$root.$on("accordion-toggled",(function(t){void 0!==e.accordions[t.name]&&e.$set(e.accordions,t.name,t.visible)})),this.$root.$on("clear-filters",(function(){e.selectedTags=[],e.selectedYear=""}))},methods:{getData:function(){var e=this;coeliac().request().get(this.buildUrl("/api/recipes/allergens",1,this.currentSearch,this.currentFilters)).then((function(t){e.allergens=t.data.data,e.selectedAllergens=[],e.currentFilters&&e.currentFilters.freefrom.forEach((function(t){e.selectedAllergens.push(e.allergens.filter((function(e){return e.title===t}))[0])}))})),coeliac().request().get(this.buildUrl("/api/recipes/features",1,this.currentSearch,this.currentFilters)).then((function(t){e.features=t.data.data,e.selectedFeatures=[],e.currentFilters&&e.currentFilters.feature.forEach((function(t){e.selectedFeatures.push(e.features.filter((function(e){return e.title===t}))[0])}))})),coeliac().request().get(this.buildUrl("/api/recipes/meals",1,this.currentSearch,this.currentFilters)).then((function(t){e.meals=t.data.data,e.selectedMeals=[],e.currentFilters&&e.currentFilters.meal.forEach((function(t){e.selectedMeals.push(e.meals.filter((function(e){return e.title===t}))[0])}))}))},selectAllergen:function(e){this.$root.$emit("add-filter",{name:"freefrom",value:e.title})},removeAllergen:function(e){this.selectedAllergens=this.selectedAllergens.filter((function(t){return t.title!==e.title})),this.$root.$emit("remove-filter",{name:"freefrom",value:e.title})},selectFeature:function(e){this.$root.$emit("add-filter",{name:"feature",value:e.title})},removeFeature:function(e){this.selectedFeatures=this.selectedFeatures.filter((function(e){return e.title!=e.title})),this.$root.$emit("remove-filter",{name:"feature",value:e.title})},selectMeal:function(e){this.$root.$emit("add-filter",{name:"meal",value:e.title})},removeMeal:function(e){this.selectedMeals=this.selectedMeals.filter((function(t){return t.title!==e.title})),this.$root.$emit("remove-filter",{name:"meal",value:e.title})},iconFor:function(e){return this.accordions[e]?"chevron-up":"chevron-down"}},computed:{filteredAllergens:function(){var e=this;return this.allergens.filter((function(t){return-1===e.selectedAllergens.indexOf(t)})).slice(0,14)},filteredFeatures:function(){var e=this;return this.features.filter((function(t){return-1===e.selectedFeatures.indexOf(t)})).slice(0,14)},filteredMeals:function(){var e=this;return this.meals.filter((function(t){return-1===e.selectedMeals.indexOf(t)})).slice(0,14)}},watch:{currentFilters:{deep:!0,handler:function(){this.getData()}},currentSearch:{deep:!0,handler:function(){this.getData()}}}};const g=(0,u.Z)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("accordion",{attrs:{group:"filters",name:"freefrom"},scopedSlots:e._u([{key:"title",fn:function(){return[r("div",{staticClass:"border-b border-grey-light p-2"},[r("div",{staticClass:"flex flex-col"},[r("h3",{staticClass:"cursor-pointer text-lg font-medium mt-1 flex justify-between items-center"},[r("span",[e._v("Free From")]),e._v(" "),r("font-awesome-icon",{staticClass:"text-blue",attrs:{icon:["fas",e.iconFor("freefrom")]}})],1)]),e._v(" "),e.selectedAllergens.length>0?r("div",{staticClass:"text-grey-dark"},[r("ul",{staticClass:"flex flex-wrap text-sm -m-2px leading-none"},e._l(e.selectedAllergens,(function(t){return r("li",{staticClass:"rounded-lg bg-blue-light m-2px flex overflow-hidden"},[r("span",{staticClass:"px-3 py-1"},[e._v(e._s(t.title))]),e._v(" "),r("span",{staticClass:"block bg-yellow px-2 py-1 cursor-pointer",on:{click:function(r){return r.stopPropagation(),e.removeAllergen(t)}}},[r("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)])})),0)]):e._e()])]},proxy:!0},{key:"body",fn:function(){return[r("div",{staticClass:"p-2"},[r("ul",e._l(e.filteredAllergens,(function(t){return r("li",{staticClass:"py-1 border-b border-dashed border-grey-off-dark transition-bg cursor-pointer hover:bg-grey-off-dark",on:{click:function(r){return r.preventDefault(),e.selectAllergen(t)}}},[r("span",[e._v(e._s(t.title))]),e._v(" "),r("span",{staticClass:"text-xs"},[e._v("("+e._s(t.recipes_count)+" Recipes)")])])})),0)])]},proxy:!0}])}),e._v(" "),r("accordion",{attrs:{group:"filters",name:"meals"},scopedSlots:e._u([{key:"title",fn:function(){return[r("div",{staticClass:"border-b border-grey-light p-2"},[r("div",{staticClass:"flex flex-col"},[r("h3",{staticClass:"cursor-pointer text-lg font-medium mt-1 flex justify-between items-center"},[r("span",[e._v("Meal")]),e._v(" "),r("font-awesome-icon",{staticClass:"text-blue",attrs:{icon:["fas",e.iconFor("meals")]}})],1)]),e._v(" "),e.selectedMeals.length>0?r("div",{staticClass:"text-grey-dark"},[r("ul",{staticClass:"flex flex-wrap text-sm -m-2px leading-none"},e._l(e.selectedMeals,(function(t){return r("li",{staticClass:"rounded-lg bg-blue-light m-2px flex overflow-hidden"},[r("span",{staticClass:"px-3 py-1"},[e._v(e._s(t.title))]),e._v(" "),r("span",{staticClass:"block bg-yellow px-2 py-1 cursor-pointer",on:{click:function(r){return r.stopPropagation(),e.removeMeal(t)}}},[r("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)])})),0)]):e._e()])]},proxy:!0},{key:"body",fn:function(){return[r("div",{staticClass:"p-2"},[r("ul",e._l(e.filteredMeals,(function(t){return r("li",{staticClass:"py-1 border-b border-dashed border-grey-off-dark transition-bg cursor-pointer hover:bg-grey-off-dark",on:{click:function(r){return r.preventDefault(),e.selectMeal(t)}}},[r("span",[e._v(e._s(t.title))]),e._v(" "),r("span",{staticClass:"text-xs"},[e._v("("+e._s(t.recipes_count)+" Recipes)")])])})),0)])]},proxy:!0}])}),e._v(" "),r("accordion",{attrs:{group:"filters",name:"features"},scopedSlots:e._u([{key:"title",fn:function(){return[r("div",{staticClass:"border-b border-grey-light p-2"},[r("div",{staticClass:"flex flex-col"},[r("h3",{staticClass:"cursor-pointer text-lg font-medium mt-1 flex justify-between items-center"},[r("span",[e._v("Features")]),e._v(" "),r("font-awesome-icon",{staticClass:"text-blue",attrs:{icon:["fas",e.iconFor("meals")]}})],1)]),e._v(" "),e.selectedFeatures.length>0?r("div",{staticClass:"text-grey-dark"},[r("ul",{staticClass:"flex flex-wrap text-sm -m-2px leading-none"},e._l(e.selectedFeatures,(function(t){return r("li",{staticClass:"rounded-lg bg-blue-light m-2px flex overflow-hidden"},[r("span",{staticClass:"px-3 py-1"},[e._v(e._s(t.title))]),e._v(" "),r("span",{staticClass:"block bg-yellow px-2 py-1 cursor-pointer",on:{click:function(r){return r.stopPropagation(),e.removeFeature(t)}}},[r("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)])})),0)]):e._e()])]},proxy:!0},{key:"body",fn:function(){return[r("div",{staticClass:"p-2"},[r("ul",e._l(e.filteredFeatures,(function(t){return r("li",{staticClass:"py-1 border-b border-dashed border-grey-off-dark transition-bg cursor-pointer hover:bg-grey-off-dark",on:{click:function(r){return r.preventDefault(),e.selectFeature(t)}}},[r("span",[e._v(e._s(t.title))]),e._v(" "),r("span",{staticClass:"text-xs"},[e._v("("+e._s(t.recipes_count)+" Recipes)")])])})),0)])]},proxy:!0}])})],1)}),[],!1,null,null,null).exports;const h={mixins:[n.Z],props:{currentFilters:{type:Object|Array},currentSearch:{type:String,default:""}},data:function(){return{counties:{},selectedCounties:[],ratings:{},selectedRatings:{},accordions:{counties:!1,ratings:!1}}},mounted:function(){var e=this;this.getData(),this.$root.$on("accordion-toggled",(function(t){void 0!==e.accordions[t.name]&&e.$set(e.accordions,t.name,t.visible)})),this.$root.$on("clear-filters",(function(){e.selectedTags=[],e.selectedYear=""}))},methods:{getData:function(){var e=this;coeliac().request().get(this.buildUrl("/api/reviews/counties",1,this.currentSearch,this.currentFilters)).then((function(t){e.counties=t.data.data,e.selectedCounties=[],e.currentFilters&&e.currentFilters.counties.forEach((function(t){Object.keys(e.counties).forEach((function(r){Object.keys(e.counties[r]).forEach((function(s){s===t&&e.selectedCounties.push({country:r,county:s})}))}))}))})),coeliac().request().get(this.buildUrl("/api/reviews/ratings",1,this.currentSearch,this.currentFilters)).then((function(t){e.ratings=t.data.data,e.selectedRatings=[],e.currentFilters&&e.currentFilters.ratings.forEach((function(t){Object.keys(e.ratings).forEach((function(r){r===t&&e.selectedCounties.push(r)}))}))}))},selectCounty:function(e,t){this.selectedCounties.push({county:e,country:t}),this.$root.$emit("add-filter",{name:"counties",value:e})},removeCounty:function(e){this.selectedCounties=this.selectedCounties.filter((function(t){return t.county!==e.county})),this.$root.$emit("remove-filter",{name:"counties",value:e.county})},selectRating:function(e){this.selectedRatings.push(e),this.$root.$emit("add-filter",{name:"ratings",value:e})},removeRating:function(e){this.selectedRatings=this.selectedRatings.filter((function(t){return t!==e})),this.$root.$emit("remove-filter",{name:"ratings",value:e})},iconFor:function(e){return this.accordions[e]?"chevron-up":"chevron-down"}},computed:{filteredCountries:function(){var e=this,t={};return Object.keys(this.counties).forEach((function(r){var s={};Object.keys(e.counties[r]).forEach((function(t){-1===JSON.stringify(e.selectedCounties).indexOf(JSON.stringify({country:r,county:t}))&&e.$set(s,t,e.counties[r][t])})),e.$set(t,r,s)})),t},filteredRatings:function(){var e=this,t={};return Object.keys(this.ratings).forEach((function(r){-1===e.selectedRatings.indexOf(r)&&e.$set(t,r,e.ratings[r])})),t}},watch:{currentFilters:{deep:!0,handler:function(){this.getData()}},currentSearch:{deep:!0,handler:function(){this.getData()}}}};const p=(0,u.Z)(h,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("accordion",{attrs:{group:"filters",name:"counties"},scopedSlots:e._u([{key:"title",fn:function(){return[r("div",{staticClass:"border-b border-grey-light p-2"},[r("div",{staticClass:"flex flex-col"},[r("h3",{staticClass:"cursor-pointer text-lg font-medium mt-1 flex justify-between items-center"},[r("span",[e._v("Counties")]),e._v(" "),r("font-awesome-icon",{staticClass:"text-blue",attrs:{icon:["fas",e.iconFor("counties")]}})],1)]),e._v(" "),e.selectedCounties.length>0?r("div",{staticClass:"text-grey-dark"},[r("ul",{staticClass:"flex flex-wrap text-sm -m-2px leading-none"},e._l(e.selectedCounties,(function(t){return r("li",{staticClass:"rounded-lg bg-blue-light m-2px flex overflow-hidden"},[r("span",{staticClass:"px-3 py-1"},[e._v(e._s(t.county)+", "+e._s(t.country))]),e._v(" "),r("span",{staticClass:"block bg-yellow px-2 py-1 cursor-pointer",on:{click:function(r){return r.stopPropagation(),e.removeCounty(t)}}},[r("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)])})),0)]):e._e()])]},proxy:!0},{key:"body",fn:function(){return[r("div",{staticClass:"p-2"},[r("ul",e._l(e.filteredCountries,(function(t,s){return r("li",{staticClass:"py-1"},[r("h3",{staticClass:"w-full font-semibold text-xl text-blue-dark"},[e._v(e._s(s))]),e._v(" "),r("ul",e._l(t,(function(t,i){return r("li",{staticClass:"py-1 border-b border-dashed border-grey-off-dark transition-bg cursor-pointer hover:bg-grey-off-dark",on:{click:function(t){return t.preventDefault(),e.selectCounty(i,s)}}},[r("span",[e._v(e._s(i))]),e._v(" "),r("span",{staticClass:"text-xs"},[e._v("("+e._s(t)+" Reviews)")])])})),0)])})),0)])]},proxy:!0}])}),e._v(" "),r("accordion",{attrs:{group:"filters",name:"ratings"},scopedSlots:e._u([{key:"title",fn:function(){return[r("div",{staticClass:"border-b border-grey-light p-2"},[r("div",{staticClass:"flex flex-col"},[r("h3",{staticClass:"cursor-pointer text-lg font-medium mt-1 flex justify-between items-center"},[r("span",[e._v("Rating")]),e._v(" "),r("font-awesome-icon",{staticClass:"text-blue",attrs:{icon:["fas",e.iconFor("ratings")]}})],1)]),e._v(" "),e.selectedRatings.length>0?r("div",{staticClass:"text-grey-dark"},[r("ul",{staticClass:"flex flex-wrap text-sm -m-2px leading-none"},e._l(e.selectedRatings,(function(t){return r("li",{staticClass:"rounded-lg bg-blue-light m-2px flex overflow-hidden"},[r("span",{staticClass:"px-3 py-1"},[e._v(e._s(t))]),e._v(" "),r("span",{staticClass:"block bg-yellow px-2 py-1 cursor-pointer",on:{click:function(r){return r.stopPropagation(),e.removeRating(t)}}},[r("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)])})),0)]):e._e()])]},proxy:!0},{key:"body",fn:function(){return[r("div",{staticClass:"p-2"},[r("ul",e._l(e.filteredRatings,(function(t,s){return r("li",{staticClass:"py-1 border-b border-dashed border-grey-off-dark transition-bg cursor-pointer hover:bg-grey-off-dark",on:{click:function(t){return t.preventDefault(),e.selectRating(s)}}},[r("span",[e._v(e._s(s))]),e._v(" "),r("span",{staticClass:"text-xs"},[e._v("("+e._s(t)+" Reviews)")])])})),0)])]},proxy:!0}])})],1)}),[],!1,null,null,null).exports,m={mixins:[s.Z],components:{"blogs-filter":f,"recipes-filter":g,"reviews-filter":p},props:{show:{type:Boolean,default:!1},title:{type:String,required:!0},totalResults:{type:Number,required:!0},currentFilters:{type:Object|Array},currentSearch:{type:String,default:""}},methods:{closeFilterBar:function(){this.$root.$emit("toggle-filter-bar")},clearFilters:function(){this.$root.$emit("clear-filters")}},computed:{component:function(){return this.title.toLowerCase()+"-filter"}},watch:{show:function(e){e?(this.googleEvent("event","modules",{event_category:"opened-filter-bar",event_label:this.title}),document.querySelector("html").classList.add("bg-black-80","overflow-hidden"),document.querySelector("html").classList.remove("bg-grey-light")):(document.querySelector("html").classList.add("bg-grey-light"),document.querySelector("html").classList.remove("bg-black-80","overflow-hidden"))}}};const v=(0,u.Z)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"w-screen h-screen fixed inset-0 bg-black-80 z-max",on:{click:function(t){return t.target!==t.currentTarget?null:e.closeFilterBar()}}},[r("div",{staticClass:"w-11/12 h-full absolute top-0 right-0 bg-white border-l border-grey-off-dark z-20 shadow-lg flex flex-col overflow-y-scroll",staticStyle:{"max-width":"350px"}},[r("div",{staticClass:"flex mb-1 items-center p-2"},[r("h2",{staticClass:"flex-1 text-xl font-medium"},[e._v("Filter "+e._s(e.title))]),e._v(" "),r("div",{staticClass:"cursor-pointer",on:{click:function(t){return e.closeFilterBar()}}},[r("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)]),e._v(" "),r("div",{staticClass:"bg-blue-light-20 p-2 text-md"},[e._v("\n            "+e._s(e.totalResults)+" "+e._s(e.title)+" shown...\n        ")]),e._v(" "),r(e.component,{tag:"component",attrs:{"current-filters":e.currentFilters,"current-search":e.currentSearch}}),e._v(" "),r("div",{staticClass:"flex justify-between p-2"},[r("button",{staticClass:"px-4 inline-block leading-none p-2 bg-blue rounded",on:{click:function(t){return e.clearFilters()}}},[e._v("Clear")]),e._v(" "),r("button",{staticClass:"px-4 inline-block leading-none p-2 bg-blue rounded",on:{click:function(t){return e.closeFilterBar()}}},[e._v("Apply")])])],1)])}),[],!1,null,null,null).exports;const x={mixins:[i.Z,a.Z],props:{module:{required:!0,validator:function(e){return-1!==["blogs","collection","recipes","reviews"].indexOf(e)}},item:{required:!0,type:Object},index:{required:!0,type:Number},page:{required:!0,type:Number},layout:{type:String,default:"tiles",validator:function(e){return-1!==["tiles","list"].indexOf(e)}},hasFilters:{type:Boolean,default:!1}},mounted:function(){var e=this;this.loadLazyImages(),this.$root.$on("layout-change",(function(t){setTimeout((function(){e.loadLazyImages()}),200)}))},methods:{commentsText:function(e){return 0===e?"No Comments":1===e?"1 Comment":"".concat(e," comments")},collectionItemsText:function(e){return 1===e?"1 item in this collection":"".concat(e," items in this collection")}},computed:{description:function(){return 1===this.page&&0===this.index&&this.item.description||this.item.meta_description},wrapperClasses:function(){if("list"===this.layout)return["w-full"];if(1===this.page&&!this.hasFilters){if(0===this.index)return["w-full","p-2"];if(this.index>0&&this.index<3)return["w-full","md:w-1/2","p-2"]}return["w-full","md:w-1/3","p-2"]},innerWrapperClasses:function(){return"list"===this.layout?["flex","flex-col","py-3","border-b","border-grey-off","sm:flex-row"]:["bg-blue-gradient-30","shadow","curved","rounded-lg","overflow-hidden","mb-4","md:h-full","flex","flex-col"]},imageClasses:function(){return"list"===this.layout?["w-full","mb-2","sm:w-1/2","sm:mr-2","sm:mb-0","lg:w-1/4"]:["w-full"]},textClasses:function(){return"list"===this.layout?["flex-1","flex","flex-col"]:["flex-1","flex","flex-col","p-2"]},headerClasses:function(){return"list"===this.layout?["text-2xl","text-blue","hover:text-grey-dark","transition-color","font-semibold","font-coeliac","leading-tight"]:["text-2xl","text-black","hover:text-grey-dark","transition-color","text-semibold","leading-tight","text-center","mb-1"]}}};const b=(0,u.Z)(x,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:e.wrapperClasses},[r("div",{class:e.innerWrapperClasses},[r("div",{staticClass:"flex flex-col",class:e.imageClasses},[r("a",{attrs:{href:e.item.link}},["recipes"!==e.module?r("img",{staticClass:"lazy w-full",attrs:{"data-src":e.item.main_image,alt:e.item.title,loading:"lazy",src:e.lazyLoadSrc}}):r("recipe-image",{attrs:{src:e.item.main_image,alt:e.item.title}})],1),e._v(" "),"recipes"===e.module&&"list"===e.layout?[r("ul",{staticClass:"flex flex-wrap justify-center -mx-2 sm:justify-start"},e._l(e.item.features,(function(t){return r("li",{staticClass:"w-1/6 m-2 flex flex-col max-w-recipe-feature text-xs leading-none text-center"},[r("img",{staticClass:"lazy",attrs:{"data-src":t.image,loading:"lazy",alt:t.feature,src:e.lazyLoadSrc}}),e._v(" "),r("span",{staticClass:"font-semibold mt-1"},[e._v(e._s(t.feature))])])})),0)]:e._e()],2),e._v(" "),r("div",{class:e.textClasses},[r("a",{class:e.headerClasses,attrs:{href:e.item.link}},[r("h2",{domProps:{innerHTML:e._s(e.item.title)}})]),e._v(" "),"reviews"===e.module?[r("span",{staticClass:"font-semibold text-xs",class:"tiles"===e.layout?"text-center":""},[e._v("\n                    "+e._s(e.item.eatery.type.name)+" in "+e._s(e.item.eatery.town.town)+", "+e._s(e.item.eatery.county.county)+"\n                ")]),e._v(" "),r("stars",{staticClass:"my-2",attrs:{stars:e.item.overall_rating}})]:e._e(),e._v(" "),"recipes"===e.module?["grid"===e.layout?r("ul",{staticClass:"flex flex-wrap justify-center -mx-2"},e._l(e.item.features,(function(t){return r("li",{staticClass:"w-1/4 m-2 flex flex-col max-w-recipe-feature text-xs leading-none text-center"},[r("img",{staticClass:"lazy",attrs:{loading:"lazy","data-src":t.image,alt:t.feature,src:e.lazyLoadSrc}}),e._v(" "),r("span",{staticClass:"font-semibold mt-1"},[e._v(e._s(t.feature))])])})),0):e._e(),e._v(" "),r("p",{staticClass:"mb-1 flex font-semibold"},[e._v("\n                    Makes "+e._s(e.item.serving_size)),r("br"),e._v("\n                    "+e._s(e.item.nutrition.calories)+" Calories per "+e._s(e.item.per)+"\n                ")])]:e._e(),e._v(" "),r("p",{staticClass:"mb-1 flex-1 h-full",domProps:{innerHTML:e._s(e.description)}}),e._v(" "),r("div",{staticClass:"text-sm flex flex-wrap justify-between"},[r("p",[e._v(e._s(e.formatDate(e.item.created_at)))]),e._v(" "),"collection"!==e.module?r("p",{staticClass:"text-right",domProps:{textContent:e._s(e.commentsText(e.item.comments_count))}}):r("p",{staticClass:"text-right",domProps:{textContent:e._s(e.collectionItemsText(e.item.items_count))}})])],2)])])}),[],!1,null,null,null).exports;const y={data:function(){return{layout:"tiles",searchText:"",searchTimeout:null}},props:{title:{required:!0,type:String},currentLayout:{type:String,default:"tiles",validator:function(e){return-1!==["tiles","list"].indexOf(e)}},currentSearch:{type:String,default:""},urlPrefix:{required:!0,type:String},showFilterBar:{type:Boolean,default:function(){return!1}}},mounted:function(){var e=this;this.layout=this.currentLayout,this.searchText=this.currentSearch,this.$root.$on("reset-search",(function(){e.searchText=""}))},methods:{changeLayout:function(e){this.layout=e,this.$root.$emit("layout-change",e)},toggleFilter:function(){this.$root.$emit("toggle-filter-bar")}},watch:{searchText:function(e){var t=this;clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((function(){t.$root.$emit("module-search",e)}),500)},currentSearch:function(e){this.searchText=e}},computed:{feedUrl:function(){return"/".concat(this.urlPrefix,"/feed")}}};const _=(0,u.Z)(y,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex flex-col"},[r("div",{staticClass:"flex justify-between items-center p-2 text-2xl bg-blue-gradient-30 border-b-4 border-yellow rounded-t-lg leading-none"},[r("h1",{staticClass:"font-semibold font-coeliac pt-2"},[e._v("Coeliac Sanctuary "+e._s(e.title))]),e._v(" "),r("a",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:{content:"RSS Feed",classes:["bg-social-rss","text-white","rounded-lg","text-sm"]},expression:"{content: 'RSS Feed', classes: ['bg-social-rss', 'text-white', 'rounded-lg', 'text-sm']}",modifiers:{left:!0}}],staticClass:"pt-1 text-social-rss",attrs:{href:e.feedUrl,target:"_blank"}},[r("font-awesome-icon",{attrs:{icon:["fas","rss-square"]}})],1)]),e._v(" "),r("div",{staticClass:"w-full flex my-2 flex-col sm:flex-row"},[e.showFilterBar?r("div",{staticClass:"w-full flex items-center mb-1 sm:w-1/2 sm:mr-2 sm:mb-0 lg:w-1/3"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchText,expression:"searchText"}],staticClass:"text-sm p-1 flex-1 bg-grey-lightest border border-grey-off rounded",attrs:{type:"search",placeholder:"Search..."},domProps:{value:e.searchText},on:{input:function(t){t.target.composing||(e.searchText=t.target.value)}}})]):e._e(),e._v(" "),r("div",{staticClass:"flex justify-between items-center flex-1"},[r("div",{staticClass:"w-auto hidden md:block"},[r("div",{staticClass:"flex"},[r("div",{staticClass:"text-sm leading-none flex rounded-l-lg",class:"tiles"===e.layout?"bg-blue text-grey-lightest":"bg-white text-grey border border-blue cursor-pointer",on:{click:function(t){return e.changeLayout("tiles")}}},[r("span",{staticClass:"p-2 border-r",class:"tiles"===e.layout?"border-grey-lightest":"border-blue"},[e._v("Grid View")]),e._v(" "),r("span",{staticClass:"p-2"},[r("font-awesome-icon",{attrs:{icon:["fas","th"]}})],1)]),e._v(" "),r("div",{staticClass:"flex text-sm leading-none rounded-r-lg",class:"list"===e.layout?"bg-blue text-grey-lightest":"bg-white text-grey border border-blue cursor-pointer",on:{click:function(t){return e.changeLayout("list")}}},[r("span",{staticClass:"p-2 border-r",class:"list"===e.layout?"border-grey-lightest":"border-blue"},[e._v("List View")]),e._v(" "),r("span",{staticClass:"p-2"},[r("font-awesome-icon",{attrs:{icon:["fas","th-list"]}})],1)])])]),e._v(" "),r("div",{staticClass:"w-full sm:text-right md:w-auto md:p-2"},[e.showFilterBar?r("button",{staticClass:"w-full inline-block leading-none p-2 bg-blue rounded sm:w-auto",on:{click:function(t){return t.preventDefault(),e.toggleFilter()}}},[e._v("\n                    Filter "+e._s(e.title)+"\n                ")]):e._e()])])])])}),[],!1,null,null,null).exports;var w=r(4851);function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],s=!0,i=!1,n=void 0;try{for(var l,a=e[Symbol.iterator]();!(s=(l=a.next()).done)&&(r.push(l.value),!t||r.length!==t);s=!0);}catch(e){i=!0,n=e}finally{try{s||null==a.return||a.return()}finally{if(i)throw n}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}const F={mixins:[n.Z,s.Z,a.Z],components:{loader:o.Z,"module-filter-slider":v,"module-list-item":b,"module-list-top-bar":_,pagination:w.Z},props:{module:{required:!0,validator:function(e){return-1!==["blogs","collection","recipes","reviews"].indexOf(e)}},title:{required:!0,type:String},urlPrefix:{required:!0,type:String},showFilterBar:{type:Boolean,default:function(){return!0}}},data:function(){return{response:{current_page:1,last_page:1,prev_page_url:"",next_page_url:"",total:0},isLoading:!0,currentPage:1,layout:"tiles",showFilters:!1,availableFilters:[],filters:{},searchText:""}},mounted:function(){var e=this;this.showFilterBar&&(this.availableFilters=l[this.module],this.availableFilters.forEach((function(t){e.$set(e.filters,t.value,[])}))),this.parseUrl(),this.events(),this.loadData()},methods:{loadData:function(){var e=this;this.showFilters||(this.isLoading=!0),coeliac().request().get(this.buildUrl("/api/".concat(this.module),this.currentPage,this.searchText,this.filters)).then((function(t){e.response=t.data.data,e.isLoading=!1,window.history.pushState(null,null,e.buildUrl(window.location.href.split("?")[0],e.currentPage,e.searchText,e.filters,!0))}))},removeFilter:function(e,t){this.$root.$emit("remove-filter",{name:e,value:t})},clearSearch:function(){this.searchText="",this.$root.$emit("reset-search","")},events:function(){var e=this;this.$root.$on("pagination-click",(function(t){e.googleEvent("event",e.title,{event_category:"navigate-page",event_label:t}),"next"===t&&(t=e.currentPage+1),"prev"===t&&(t=e.currentPage-1),e.currentPage=t,e.loadData(),e.$scrollTo(e.$refs.items,500,{offset:-200})})),this.$root.$on("layout-change",(function(t){e.googleEvent("event",e.title,{event_category:"layout-change",event_label:t}),e.layout=t,e.loadLazyImages()})),this.$root.$on("add-filter",(function(t){e.googleEvent("event",e.title,{event_category:"added-filter",event_label:t.name}),t.single&&(e.filters[t.name]=[]),e.filters[t.name].push(t.value),e.currentPage=1,e.loadData()})),this.$root.$on("clear-filters",(function(){e.googleEvent("event",e.title,{event_category:"cleared-filters"}),e.availableFilters.forEach((function(t){e.filters[t.value]=[]})),e.currentPage=1,e.loadData()})),this.$root.$on("remove-filter",(function(t){e.googleEvent("event",e.title,{event_category:"removed-filter",event_label:t.name}),e.filters[t.name]=e.filters[t.name].filter((function(e){return e!==t.value})),e.loadData()})),this.$root.$on("toggle-filter-bar",(function(){e.showFilters=!e.showFilters})),this.$root.$on("module-search",(function(t){e.googleEvent("event",e.title,{event_category:"used-search",event_label:t}),e.searchText=t,e.loadData()}))},parseUrl:function(){var e=this,t=window.location.href.split("?o=");t.length>1&&atob(t[1]).split("&").forEach((function(t){var r=C(t.split("="),2),s=r[0],i=r[1];if("page"===s&&(e.currentPage=parseInt(i)),"search"===s&&(e.searchText=i),""!==i&&null!==/filter\[([a-z\-]+)\]/m.exec(s)){var n=/filter\[([a-z\-]+)\]/m.exec(s);e.filters[n[1]]=i.split(",")}}))}},computed:{hasFilters:function(){var e=this,t=!1;return""!==this.searchText&&(t=!0),Object.keys(this.filters).forEach((function(r){e.filters[r]&&e.filters[r].length>0&&(t=!0)})),t}}};const $=(0,u.Z)(F,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-box"},[e.showFilterBar?r("module-filter-slider",{attrs:{show:e.showFilters,title:e.title,"total-results":e.response.total,"current-filters":e.filters,"current-search":e.searchText}}):e._e(),e._v(" "),r("module-list-top-bar",{attrs:{title:e.title,currentLayout:e.layout,"url-prefix":e.urlPrefix,"show-filter-bar":e.showFilterBar,currentSearch:e.searchText}}),e._v(" "),r("pagination",{attrs:{current:e.response.current_page,lastPage:e.response.last_page,"can-go-back":!!e.response.prev_page_url,"can-go-forward":!!e.response.next_page_url}}),e._v(" "),e.showFilters?r("div",[r("ul",{staticClass:"flex -m-1"},[""!==e.searchText?r("li",{staticClass:"m-1 bg-blue-light rounded-lg text-xs overflow-hidden flex justify-between"},[r("div",{staticClass:"py-1 px-3"},[e._v("Search: "+e._s(e.searchText))]),e._v(" "),r("div",{staticClass:"bg-yellow py-1 px-3 cursor-pointer",on:{click:e.clearSearch}},[r("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)]):e._e(),e._v(" "),e._l(e.availableFilters,(function(t){return e._l(e.filters[t.value],(function(s){return r("li",{staticClass:"m-1 bg-blue-light rounded-lg text-xs overflow-hidden flex justify-between"},[r("div",{staticClass:"py-1 px-3"},[e._v(e._s(t.label)+": "+e._s(s))]),e._v(" "),r("div",{staticClass:"bg-yellow py-1 px-3 cursor-pointer",on:{click:function(r){return e.removeFilter(t.value,s)}}},[r("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)])}))}))],2)]):e._e(),e._v(" "),e.isLoading?r("div",{staticClass:"relative h-64"},[r("loader",{attrs:{show:!0}})],1):r("div",[r("div",{ref:"items",staticClass:"flex flex-col my-2 md:flex-row md:flex-wrap -mx-2"},e._l(e.response.data,(function(t,s){return r("module-list-item",{key:t.id,attrs:{module:e.module,item:t,index:s,page:e.currentPage,layout:e.layout,"has-filters":e.hasFilters}})})),1)]),e._v(" "),r("pagination",{attrs:{current:e.response.current_page,lastPage:e.response.last_page,"can-go-back":!!e.response.prev_page_url,"can-go-forward":!!e.response.next_page_url}})],1)}),[],!1,null,null,null).exports},4851:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const s={props:{current:{required:!0,type:Number},lastPage:{required:!0,type:Number},canGoBack:{required:!0,type:Boolean},canGoForward:{required:!0,type:Boolean}},computed:{pageArray:function(){for(var e=this,t=[],r=Math.ceil(this.lastPage/5),s=[],i=0;i<r;i++){for(var n=[],l=1;l<=5;l++)n.push(5*i+l);s.push(n)}t.push({label:"1",goTo:1}),this.current>5&&t.push({label:"...",goTo:this.current-1});var a=s.findIndex((function(t){return-1!==t.indexOf(e.current)}));return s[a].forEach((function(r){r>1&&r<e.lastPage&&t.push({label:r.toString(),goTo:r})})),a+1<s.length&&t.push({label:"...",goTo:s[a+1][0]}),t.push({label:this.lastPage.toString(),goTo:this.lastPage}),t}},methods:{goTo:function(e){this.$root.$emit("pagination-click",e)}}};const i=(0,r(1900).Z)(s,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.lastPage>1?r("ul",{staticClass:"flex flex-wrap font-semibold leading-none justify-center"},[e.canGoBack?r("li",{staticClass:"border border-blue-light bg-blue-light text-white rounded m-px cursor-pointer transition-bg transition-color hover:bg-white hover:text-blue-light"},[r("a",{staticClass:"p-2 block",on:{click:function(t){return t.preventDefault(),e.goTo("prev")}}},[e._v("Previous")])]):e._e(),e._v(" "),e._l(e.pageArray,(function(t){return r("li",{staticClass:"border border-blue-light rounded m-px cursor-pointer transition-bg transition-color",class:t.goTo!==e.current?"bg-blue-light text-white hover:bg-white hover:text-blue-light":"bg-white text-blue-light"},[r("a",{staticClass:"p-2 block",on:{click:function(r){return r.preventDefault(),e.goTo(t.goTo)}}},[e._v(e._s(t.label))])])})),e._v(" "),e.canGoForward?r("li",{staticClass:"border border-blue-light bg-blue-light text-white rounded m-px cursor-pointer transition-bg hover:bg-white hover:text-blue-light"},[r("a",{staticClass:"p-2 block",on:{click:function(t){return t.preventDefault(),e.goTo("next")}}},[e._v("Next")])]):e._e()],2):e._e()}),[],!1,null,null,null).exports}}]);