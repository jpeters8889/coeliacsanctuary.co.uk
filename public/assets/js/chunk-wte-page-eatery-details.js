(self.webpackChunk=self.webpackChunk||[]).push([[1349],{3923:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(7484),s=n.n(i);const a={methods:{formatDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"D MMMM YYYY";return s()(e).format(t)}}}},2903:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={props:{lat:{type:Number,required:!0},lng:{type:Number,required:!0},zoom:{type:Number,default:16}}}},2840:(e,t,n)=>{"use strict";function i(e){return new Promise((function(t){if(document.querySelector('script[src="'.concat(e,'"]')))t();else{var n=document.createElement("script");n.setAttribute("src",e),document.body.appendChild(n),n.addEventListener("load",t)}}))}n.d(t,{v:()=>i})},7484:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,i="millisecond",s="second",a="minute",r="hour",o="day",l="week",c="month",u="quarter",d="year",m="date",f="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},g=function(e,t,n){var i=String(e);return!i||i.length>=t?e:""+Array(t+1-i.length).join(n)+e},y={s:g,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),i=Math.floor(n/60),s=n%60;return(t<=0?"+":"-")+g(i,2,"0")+":"+g(s,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var i=12*(n.year()-t.year())+(n.month()-t.month()),s=t.clone().add(i,c),a=n-s<0,r=t.clone().add(i+(a?-1:1),c);return+(-(i+(n-s)/(a?s-r:r-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:l,d:o,D:m,h:r,m:a,s,ms:i,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},_="en",x={};x[_]=v;var b=function(e){return e instanceof k},w=function(e,t,n){var i;if(!e)return _;if("string"==typeof e)x[e]&&(i=e),t&&(x[e]=t,i=e);else{var s=e.name;x[s]=e,i=s}return!n&&i&&(_=i),i||!n&&_},C=function(e,t){if(b(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new k(n)},$=y;$.l=w,$.i=b,$.w=function(e,t){return C(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var k=function(){function v(e){this.$L=w(e.locale,null,!0),this.parse(e)}var g=v.prototype;return g.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if($.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var i=t.match(p);if(i){var s=i[2]-1||0,a=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],s,i[3]||1,i[4]||0,i[5]||0,i[6]||0,a)):new Date(i[1],s,i[3]||1,i[4]||0,i[5]||0,i[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return $},g.isValid=function(){return!(this.$d.toString()===f)},g.isSame=function(e,t){var n=C(e);return this.startOf(t)<=n&&n<=this.endOf(t)},g.isAfter=function(e,t){return C(e)<this.startOf(t)},g.isBefore=function(e,t){return this.endOf(t)<C(e)},g.$g=function(e,t,n){return $.u(e)?this[t]:this.set(n,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,t){var n=this,i=!!$.u(t)||t,u=$.p(e),f=function(e,t){var s=$.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return i?s:s.endOf(o)},p=function(e,t){return $.w(n.toDate()[e].apply(n.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},h=this.$W,v=this.$M,g=this.$D,y="set"+(this.$u?"UTC":"");switch(u){case d:return i?f(1,0):f(31,11);case c:return i?f(1,v):f(0,v+1);case l:var _=this.$locale().weekStart||0,x=(h<_?h+7:h)-_;return f(i?g-x:g+(6-x),v);case o:case m:return p(y+"Hours",0);case r:return p(y+"Minutes",1);case a:return p(y+"Seconds",2);case s:return p(y+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,t){var n,l=$.p(e),u="set"+(this.$u?"UTC":""),f=(n={},n[o]=u+"Date",n[m]=u+"Date",n[c]=u+"Month",n[d]=u+"FullYear",n[r]=u+"Hours",n[a]=u+"Minutes",n[s]=u+"Seconds",n[i]=u+"Milliseconds",n)[l],p=l===o?this.$D+(t-this.$W):t;if(l===c||l===d){var h=this.clone().set(m,1);h.$d[f](p),h.init(),this.$d=h.set(m,Math.min(this.$D,h.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},g.set=function(e,t){return this.clone().$set(e,t)},g.get=function(e){return this[$.p(e)]()},g.add=function(i,u){var m,f=this;i=Number(i);var p=$.p(u),h=function(e){var t=C(f);return $.w(t.date(t.date()+Math.round(e*i)),f)};if(p===c)return this.set(c,this.$M+i);if(p===d)return this.set(d,this.$y+i);if(p===o)return h(1);if(p===l)return h(7);var v=(m={},m[a]=t,m[r]=n,m[s]=e,m)[p]||1,g=this.$d.getTime()+i*v;return $.w(g,this)},g.subtract=function(e,t){return this.add(-1*e,t)},g.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var i=e||"YYYY-MM-DDTHH:mm:ssZ",s=$.z(this),a=this.$H,r=this.$m,o=this.$M,l=n.weekdays,c=n.months,u=function(e,n,s,a){return e&&(e[n]||e(t,i))||s[n].substr(0,a)},d=function(e){return $.s(a%12||12,e,"0")},m=n.meridiem||function(e,t,n){var i=e<12?"AM":"PM";return n?i.toLowerCase():i},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:$.s(o+1,2,"0"),MMM:u(n.monthsShort,o,c,3),MMMM:u(c,o),D:this.$D,DD:$.s(this.$D,2,"0"),d:String(this.$W),dd:u(n.weekdaysMin,this.$W,l,2),ddd:u(n.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(a),HH:$.s(a,2,"0"),h:d(1),hh:d(2),a:m(a,r,!0),A:m(a,r,!1),m:String(r),mm:$.s(r,2,"0"),s:String(this.$s),ss:$.s(this.$s,2,"0"),SSS:$.s(this.$ms,3,"0"),Z:s};return i.replace(h,(function(e,t){return t||p[e]||s.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(i,m,f){var p,h=$.p(m),v=C(i),g=(v.utcOffset()-this.utcOffset())*t,y=this-v,_=$.m(this,v);return _=(p={},p[d]=_/12,p[c]=_,p[u]=_/3,p[l]=(y-g)/6048e5,p[o]=(y-g)/864e5,p[r]=y/n,p[a]=y/t,p[s]=y/e,p)[h]||y,f?_:$.a(_)},g.daysInMonth=function(){return this.endOf(c).$D},g.$locale=function(){return x[this.$L]},g.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),i=w(e,t,!0);return i&&(n.$L=i),n},g.clone=function(){return $.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},v}(),F=k.prototype;return C.prototype=F,[["$ms",i],["$s",s],["$m",a],["$H",r],["$W",o],["$M",c],["$y",d],["$D",m]].forEach((function(e){F[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),C.extend=function(e,t){return e.$i||(e(t,k,C),e.$i=!0),C},C.locale=w,C.isDayjs=b,C.unix=function(e){return C(1e3*e)},C.en=x[_],C.Ls=x,C.p={},C}()},4641:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(2903),s=n(2840),a=n(9081);const r={mixins:[i.Z,a.Z],mounted:function(){var e=this;this.googleEvent("event","dynamic-map",{event_category:"dynamic-map",event_label:"dynamic-map-viewed-".concat(this.lat,",").concat(this.lng)}),(0,s.v)("https://maps.google.com/maps/api/js?key=".concat(window.config.googleMaps.dynamic)).then((function(){var t=new google.maps.LatLng(e.lat,e.lng),n=new google.maps.Map(e.$refs.map,{center:t,zoom:e.zoom,mapTypeControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1});new google.maps.Marker({position:t,map:n,icon:{url:coeliac().getAsset("eatery.png","/images/map-markers"),size:new google.maps.Size(30,40)}})}))}};const o=(0,n(1900).Z)(r,(function(){var e=this.$createElement;return(this._self._c||e)("div",{ref:"map",staticClass:"h-80vh"})}),[],!1,null,null,null).exports},1835:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>V});var i=n(8222),s=n(2474),a=n(9081);const r={mixins:[s.Z,a.Z],props:{eatery:{type:Object,required:!0}}};var o=n(1900);const l=(0,o.Z)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex justify-between items-center bg-grey-light p-3"},[e.eatery.county.id>1?n("a",{staticClass:"flex-1 text-xs font-semibold font-sans hover:text-blue-dark transition-all",attrs:{href:"/wheretoeat/"+e.eatery.county.slug+"/"+e.eatery.town.slug}},[n("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:["fas","arrow-left"]}}),e._v("\n    Back to all locations in "+e._s(e.eatery.town.town)+"\n  ")],1):n("a",{staticClass:"flex-1 text-xs font-semibold font-sans hover:text-blue-dark transition-all",attrs:{href:"/wheretoeat/nationwide"}},[n("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:["fas","arrow-left"]}}),e._v("\n    Back to all nationwide eateries\n  ")],1),e._v(" "),n("div",{staticClass:"flex justify-center relative"},[n("div",{staticClass:"mr-2 text-3xl text-grey cursor-pointer hover:text-social-facebook transition-all",on:{click:function(t){return t.preventDefault(),e.facebookShare()}}},[n("font-awesome-icon",{attrs:{icon:["fab","facebook-square"]}})],1),e._v(" "),n("div",{staticClass:"mr-2 text-3xl text-grey cursor-pointer hover:text-social-twitter transition-all",on:{click:function(t){return t.preventDefault(),e.twitterShare()}}},[n("font-awesome-icon",{attrs:{icon:["fab","twitter-square"]}})],1),e._v(" "),n("div",{staticClass:"mr-2 text-3xl text-grey cursor-pointer hover:text-social-pinterest transition-all",on:{click:function(t){return t.preventDefault(),e.pinterestShare()}}},[n("font-awesome-icon",{attrs:{icon:["fab","pinterest-square"]}})],1),e._v(" "),n("div",{staticClass:"text-3xl text-grey cursor-pointer hover:text-social-reddit transition-all",on:{click:function(t){return t.preventDefault(),e.redditShare()}}},[n("font-awesome-icon",{attrs:{icon:["fab","reddit-square"]}})],1)])])}),[],!1,null,null,null).exports;var c=n(4641);const u={props:{openingTimes:{type:Object,required:!0}},data:function(){return{days:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"]}},methods:{isOpenOn:function(e){return!!this.openingTimes["".concat(e,"_start")]},openingTimeToString:function(e){var t=this.openingTimesFor(e);return"".concat(t.open," - ").concat(t.close)},openingTimesFor:function(e){return{open:this.formatTime(this.openingTimes["".concat(e,"_start")]),close:this.formatTime(this.openingTimes["".concat(e,"_end")])}},formatTime:function(e){var t=e.split(":");return"".concat(t[0],":").concat(t[1])},ucfirst:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}};const d=(0,o.Z)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-4"},[n("ul",{staticClass:"space-y-2"},e._l(e.days,(function(t,i){return n("li",{key:i,staticClass:"flex justify-between"},[n("span",{staticClass:"mr-4"},[e._v(e._s(e.ucfirst(t)))]),e._v(" "),e.isOpenOn(t)?n("span",{domProps:{textContent:e._s(e.openingTimeToString(t))}}):n("span",[e._v("Closed")])])})),0)])}),[],!1,null,null,null).exports;const m={components:{"dynamic-map":c.Z,modal:function(){return n.e(5441).then(n.bind(n,4609))},"opening-times-modal":d},mixins:[s.Z,a.Z],props:{eatery:{type:Object,required:!0}},data:function(){return{viewMap:!1,viewOpeningTimes:!1}},computed:{averageExpense:function(){if(!this.eatery.average_expense)return null;for(var e="",t=0;t<parseInt(this.eatery.average_expense.value);t+=1)e+="£";return e},openText:function(){return this.eatery.openingTimes.is_open_now?"Open, closes at ".concat(this.eatery.openingTimes.closes_at):"Currently Closed"}},mounted:function(){var e=this;this.$root.$on("modal-closed",(function(){e.viewMap=!1,e.viewOpeningTimes=!1}))}};const f={components:{"header-breadcrumbs":l,"header-links":(0,o.Z)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"flex flex-wrap gap-2 items-center px-3"},[e.eatery.county.id>1?n("li",{staticClass:"bg-blue-light bg-opacity-25 rounded px-3 py-1 leading-none"},[n("a",{staticClass:"text-sm font-semibold text-grey hover:text-black transition-all ease-in-out cursor-pointer",on:{click:function(t){t.preventDefault(),e.viewMap=!0}}},[n("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:["far","map"]}}),e._v(" "),n("span",[e._v("Map")])],1)]):e._e(),e._v(" "),e.eatery.website?n("li",{staticClass:"bg-blue-light bg-opacity-25 rounded px-3 py-1 leading-none"},[n("a",{staticClass:"text-sm font-semibold text-grey hover:text-black transition-all ease-in-out",attrs:{href:e.eatery.website,target:"_blank"}},[n("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:["fas","external-link-alt"]}}),e._v(" "),n("span",[e._v("Website")])],1)]):e._e(),e._v(" "),e.eatery.phone?n("li",{staticClass:"bg-blue-light bg-opacity-25 rounded px-3 py-1 leading-none"},[n("a",{staticClass:"text-sm font-semibold text-grey hover:text-black transition-all ease-in-out",attrs:{href:"tel:"+e.eatery.phone,target:"_blank"}},[n("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:["fas","mobile-alt"]}}),e._v(" "),n("span",[e._v("Phone")])],1)]):e._e(),e._v(" "),e.eatery.gf_menu_link?n("li",{staticClass:"hidden xs:block bg-blue-light bg-opacity-25 rounded px-3 py-1 leading-none"},[n("a",{staticClass:"text-sm font-semibold text-grey hover:text-black transition-all ease-in-out",attrs:{href:e.eatery.gf_menu_link,target:"_blank"}},[n("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:["far","sticky-note"]}}),e._v(" "),n("span",[e._v("GF Menu")]),e._v(" "),n("font-awesome-icon",{staticClass:"ml-1",attrs:{icon:["fas","link"]}})],1)]):e._e(),e._v(" "),e.eatery.average_expense?n("li",{staticClass:"hidden md:block bg-blue-light bg-opacity-25 rounded px-3 py-1 leading-none"},[n("a",{staticClass:"text-sm font-semibold text-grey hover:text-black transition-all ease-in-out"},[n("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:["fas","wallet"]}}),e._v(" "),n("span",[e._v(e._s(e.averageExpense)+" - "+e._s(e.eatery.average_expense.label))])],1)]):e._e(),e._v(" "),e.eatery.openingTimes?n("li",{staticClass:"hidden md:block bg-blue-light bg-opacity-25 rounded px-3 py-1 leading-none"},[n("a",{staticClass:"text-sm font-semibold text-grey hover:text-black transition-all ease-in-out cursor-pointer",on:{click:function(t){t.preventDefault(),e.viewOpeningTimes=!0}}},[n("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:["far","clock"]}}),e._v(" "),n("span",[e._v(e._s(e.openText))])],1)]):e._e(),e._v(" "),e.viewMap?n("portal",{attrs:{to:"modal"}},[n("modal",{attrs:{"modal-classes":"w-full h-full",title:e.eatery.formatted_address,name:"map"}},[n("dynamic-map",{attrs:{lat:e.eatery.lat,lng:e.eatery.lng}})],1)],1):e._e(),e._v(" "),e.viewOpeningTimes?n("portal",{attrs:{to:"modal"}},[n("modal",{attrs:{title:"Opening Times",name:"opening-times","modal-classes":"w-full max-w-[400px]"}},[n("opening-times-modal",{attrs:{"opening-times":e.eatery.openingTimes}})],1)],1):e._e()],1)}),[],!1,null,null,null).exports},mixins:[i.Z,s.Z,a.Z],props:{eatery:{type:Object,required:!0}}};const p=(0,o.Z)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-box page-box-no-padding flex flex-col space-y-3"},[n("header-breadcrumbs",{attrs:{eatery:e.eatery}}),e._v(" "),n("div",[n("div",{staticClass:"flex justify-between px-3"},[n("h1",{staticClass:"text-3xl font-coeliac font-semibold leading-tight"},[e._v("\n        "+e._s(e.eatery.name)+"\n      ")]),e._v(" "),n("div",{staticClass:"w-6 pt-2 xs:w-7"},[n("img",{attrs:{src:e.eatery.icon,alt:"",width:"100%",height:"100%"}})])]),e._v(" "),e.eatery.userReviews.length>0?n("div",{staticClass:"px-3 flex justify-between items-center sm:flex-row-reverse"},[n("span",{staticClass:"flex-1 sm:mr-2"},[e._v("\n        Rated "),n("strong",[e._v(e._s(e.eatery.average_rating)+" stars")]),e._v(" from\n        "),n("strong",[e._v(e._s(e.eatery.userReviews.length)+" review"+e._s(e.eatery.userReviews.length>1?"s":""))])]),e._v(" "),n("global-ui-stars",{attrs:{stars:e.eatery.average_rating,"half-star":"star-half-alt","show-all":""}})],1):e._e(),e._v(" "),n("div",{staticClass:"flex space-x-3 text-sm font-semibold px-3 text-grey-darker mt-1"},[e._v("\n      "+e._s(e.eatery.venueType.venue_type)+e._s(e.eatery.cuisine.cuisine?", "+e.eatery.cuisine.cuisine:"")+"\n    ")]),e._v(" "),"Nationwide"!==e.eatery.town.town?n("div",{staticClass:"flex space-x-3 text-xs font-semibold px-3 text-grey-darker mt-1"},[e._v("\n      "+e._s(e.eatery.town.town)+", "+e._s(e.eatery.county.county)+"\n    ")]):e._e()]),e._v(" "),n("header-links",{attrs:{eatery:e.eatery}}),e._v(" "),e.eatery.formattedReviews.length?n("div",{staticClass:"flex flex-col space-y-3 bg-grey-light p-3"},[n("div",{staticClass:"flex space-x-1 text-sm items-center leading-none"},[n("span",[e._v("Rated")]),e._v(" "),n("global-ui-stars",{attrs:{stars:e.eatery.average_rating,size:"text-base","half-star":"star-half-alt","show-all":""}}),e._v(" "),n("span",[e._v("from "),n("strong",[e._v(e._s(e.eatery.formattedReviews.length))]),e._v(" review"+e._s(e.eatery.formattedReviews.length>1?"s":""))])],1)]):n("div")],1)}),[],!1,null,null,null).exports;var h=n(3425);const v={computed:{howExpensiveValues:function(){return[{value:1,label:"Cheap and quick"},{value:2,label:"Great Value"},{value:3,label:"Average"},{value:4,label:"A special treat"},{value:5,label:"Expensive"}]}}};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const _={components:{Loader:function(){return n.e(8540).then(n.bind(n,2756))}},data:function(){return{images:[]}},computed:{imageClasses:function(){return["border","border-blue-dark","flex","m-2","h-[97.75px]","items-center","justify-center","rounded","w-[130px]","xxs:h-[112.5px]","xxs-w-[150px]"]},imageOverlayClasses:function(){return["w-full","h-full","opacity-0","transition","transition-opacity","bg-black","bg-opacity-50","group-hover:opacity-100","absolute","top-1/2","left-1/2","transform","-translate-x-1/2","-translate-y-1/2","text-red","flex","items-center","justify-center"]}},methods:{processImages:function(){for(var e=this,t=this.$refs.fileTrigger.files,n=new FormData,i=[],s=0;s<t.length;s+=1){if(!this.validateImage(t[s])){coeliac().error("There was an error uploading one of your images...");break}if(s>=6){coeliac().error("You can only upload 6 images");break}n.append("images[".concat(s,"]"),t[s]),i.push(this.pushImage())}coeliac().request().post("/api/wheretoeat/review/image-upload",n,{"Content-Type":"multipart/form-data"}).then((function(t){t.data.images.forEach((function(t,n){e.displayImage(t,i[n])})),e.emitChange()}))},validateImage:function(e){return!!["image/png","image/jpg","image/jpeg","image/gif"].includes(e.type.toLowerCase())&&!(e.size>=512e4)},pushImage:function(){var e=this.images.length;return this.$set(this.images,e,{processing:!0}),e},displayImage:function(e,t){this.$set(this.images,t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({processing:!1},e))},uploadImage:function(){this.$refs.fileTrigger.click()},deleteImage:function(e){this.images=this.images.filter((function(t){return t.id!==e})),this.emitChange()},emitChange:function(){this.$root.$emit("images-change",this.images.map((function(e){return e.id})))}}};const x={components:{"form-input":function(){return Promise.all([n.e(5816),n.e(1531)]).then(n.bind(n,9668))},"form-step":function(){return Promise.all([n.e(5816),n.e(1389)]).then(n.bind(n,835))},"form-textarea":function(){return Promise.all([n.e(5816),n.e(993)]).then(n.bind(n,8817))},"form-checkbox":function(){return Promise.all([n.e(5816),n.e(7279)]).then(n.bind(n,966))},UploadImages:(0,o.Z)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex-1"},[n("span",{staticClass:"block text-lg text-blue-dark font-semibold"},[e._v("\n    Do you want to attach up to six (6) images with your review?\n  ")]),e._v(" "),n("div",{staticClass:"rounded-lg border-grey-off border p-2 mt-2"},[n("input",{ref:"fileTrigger",staticClass:"hidden",attrs:{type:"file",accept:"image/*",multiple:""},on:{change:function(t){return e.processImages()}}}),e._v(" "),n("ul",{staticClass:"flex flex-wrap -m-2"},[e._l(e.images,(function(t,i){return n("li",{key:i,class:e.imageClasses.concat([e.images.length>0?"initial":"hidden"])},[t.processing?n("div",{staticClass:"h-[100px] w-[100px]"},[n("loader",{attrs:{"background-position":"relative","max-height":"100px","max-width":"100px",show:!0}})],1):n("div",{staticClass:"h-full w-full group text-8xl text-blue-dark cursor-pointer relative"},[n("img",{staticClass:"h-full w-full object-cover",attrs:{src:t.path,alt:""}}),e._v(" "),n("div",{class:e.imageOverlayClasses,on:{click:function(n){return e.deleteImage(t.id)}}},[n("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)])])})),e._v(" "),e.images.length<6?n("li",{staticClass:"text-6xl text-blue-dark cursor-pointer",class:e.imageClasses,on:{click:function(t){return e.uploadImage()}}},[n("font-awesome-icon",{staticClass:"transition transition-opacity opactiy-0 group-hover:opactiy-100",attrs:{icon:["fas","plus"]}})],1):e._e()],2),e._v(" "),n("small",{staticClass:"text-xs leading-none text-grey-off-dark"},[e._v("Maximum file size: 5mb")])])])}),[],!1,null,null,null).exports},mixins:[h.Z,v],props:{id:{type:Number,required:!0},name:{type:String,required:!0},isNationwide:{type:Boolean,required:!0}},data:function(){return{hoveringOn:null,showReviewForm:!1,submittedReviewForm:!1,form:{rating:0,name:"",email:"",food:"",service:"",expense:"",comment:"",images:[]},characterLimit:1500}},computed:{usedCharacters:function(){return this.form.comment.length},formKeys:function(){return Object.keys(this.form)},stars:function(){return[{value:1},{value:2},{value:3},{value:4},{value:5}]},ratings:function(){return[{value:"poor",label:"Poor"},{value:"good",label:"Good"},{value:"excellent",label:"Excellent"}]}},destroyed:function(){this.showReviewForm=!1,this.form.rating=null,this.form.name="",this.form.email="",this.form.food="",this.form.service="",this.form.expense="",this.form.comment="",this.form.branchName=null,"admin_review"in this.form&&delete this.form.admin_review,"branchName"in this.form&&delete this.form.branchName,this.submitRating()},mounted:function(){var e=this;this.isLoggedIn()&&(this.form.name=window.config.user.name,this.form.email=window.config.user.email),this.isAdmin()&&this.$set(this.form,"admin_review",!1),this.isNationwide&&this.$set(this.form,"branchName",null),this.formKeys.forEach((function(t){e.$root.$on("".concat(t,"-change"),(function(n){e.form[t]=n}))}))},methods:{submitRating:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.submitted||(t&&this.isLoggedIn()&&(this.form.name="",this.form.email=""),this.validateForm()?coeliac().request().post("/api/wheretoeat/".concat(this.id,"/reviews"),this.formData()).then((function(t){if(200===t.status)return e.submitted=!0,e.$root.$emit("rated-place",e.id),void coeliac().success("Thanks, your review has been submitted and is awaiting approval!");coeliac().error("Sorry, there was an error submitting your review, please try again.")})).catch((function(){coeliac().error("Sorry, there was an error submitting your review, please try again.")})):coeliac().error("Please complete all form fields to submit a review!"))},formData:function(){var e={rating:this.form.rating,name:""!==this.form.name?this.form.name:null,email:""!==this.form.email?this.form.email:null,food:""!==this.form.food?this.form.food:null,service:""!==this.form.service?this.form.service:null,expense:""!==this.form.expense?parseInt(this.form.expense):null,comment:""!==this.form.comment?this.form.comment:null,images:this.form.images};return this.isAdmin&&(e.admin_review=this.form.admin_review),this.isNationwide&&(e.branch_name=this.form.branchName),e},validateForm:function(){var e=this;if(!this.showReviewForm)return!0;if(!this.form.rating)return!1;var t={name:!1,email:!1,comment:!1};return this.formKeys.forEach((function(n){""!==e.form[n]&&(t[n]=!0)})),Object.values(t).indexOf(!0)>-1&&Object.values(t).indexOf(!1)>-1?(this.formKeys.forEach((function(t){e.$root.$emit("".concat(t,"-validate"))})),!1):!this.isNationwide||null!==this.form.branchName},closeModal:function(){this.$root.$emit("close-modal","showCreate")}}};const b=(0,o.Z)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-box flex flex-col space-y-3"},[n("p",[e._v("\n    Have you visited "),n("strong",[e._v(e._s(e.name))]),e._v("? How would you rate your experience from 1 to 5 stars?\n  ")]),e._v(" "),n("form-step",{attrs:{name:"rating",value:e.form.rating,options:e.stars,icon:["fas","star"],"unselected-icon":null,"hide-option-text":""}}),e._v(" "),e.form.rating?[n("p",[e._v("\n      You're about to give a "),n("strong",[e._v(e._s(e.form.rating)+" star")]),e._v(" rating to "),n("strong",[e._v(e._s(e.name))]),e._v(".\n    ")]),e._v(" "),e.showReviewForm?e._e():n("p",[e._v("\n      Do you want to also write a short review about your experience at "),n("strong",[e._v(e._s(e.name))]),e._v(", or\n      just submit your "),n("strong",[e._v(e._s(e.form.rating)+" star")]),e._v(" rating?\n    ")]),e._v(" "),e.showReviewForm?e._e():n("div",{staticClass:"flex flex-col space-y-2 sm:flex-row sm:justify-between sm:space-y-0 lg:justify-start lg:space-x-3"},[n("button",{staticClass:"bg-blue rounded p-3 border border-blue hover:bg-opacity-50 transition-all font-semibold",on:{click:function(t){return t.preventDefault(),e.submitRating(!0)}}},[e._v("\n        No, just save my rating\n      ")]),e._v(" "),n("button",{staticClass:"bg-yellow rounded p-3 border border-yellow hover:bg-opacity-50 transition-all font-semibold",on:{click:function(t){t.preventDefault(),e.showReviewForm=!0}}},[e._v("\n        Yes, I want to leave a review\n      ")])]),e._v(" "),e.showReviewForm?n("div",{staticClass:"flex flex-col space-y-4"},[n("div",{staticClass:"flex-1"},[n("form-input",{attrs:{required:"",name:"name",value:e.form.name,label:"Your Name"}})],1),e._v(" "),n("div",{staticClass:"flex-1"},[n("form-input",{attrs:{required:"",name:"email",type:"email",value:e.form.email,label:"Your Email"}})],1),e._v(" "),n("div",{staticClass:"flex-1"},[n("form-step",{attrs:{name:"food",label:"How would you rate your food?",value:e.form.food,options:e.ratings,"icon-classes":"px-1"}})],1),e._v(" "),n("div",{staticClass:"flex-1"},[n("form-step",{attrs:{name:"service",label:"How would you rate the service?",value:e.form.service,options:e.ratings,"icon-classes":"px-1"}})],1),e._v(" "),n("div",{staticClass:"flex-1"},[n("form-step",{attrs:{name:"expense",label:"How expensive is it to eat here?",value:e.form.expense,options:e.howExpensiveValues,icon:["fas","pound-sign"],"unselected-icon":null,"icon-classes":"px-1"}})],1),e._v(" "),e.isNationwide?n("div",{staticClass:"flex-1"},[n("form-input",{attrs:{required:"",name:"branchName",type:"branchName",value:e.form.branchName,label:"What branch did you eat at?"}})],1):e._e(),e._v(" "),n("div",{staticClass:"flex-1"},[n("form-textarea",e._b({attrs:{required:"",name:"comment",value:e.form.comment,rows:5,label:"Your Comment"}},"form-textarea",e.isAdmin()?{}:{max:1500},!1)),e._v(" "),n("span",{staticClass:"text-xs text-right",class:e.characterLimit===e.usedCharacters?"text-red font-semibold":""},[e._v("\n          "+e._s(e.usedCharacters)+" / "+e._s(e.characterLimit)+"\n        ")])],1),e._v(" "),e.isAdmin()?n("div",{staticClass:"flex-1"},[n("form-checkbox",{attrs:{name:"admin_review",label:"Post as admin review",value:e.form.admin_review}})],1):e._e(),e._v(" "),n("upload-images"),e._v(" "),n("div",{staticClass:"flex-1 text-center"},[n("button",{staticClass:"mt-2 bg-blue bg-opacity-50 border border-blue rounded-lg px-6 py-2 text-xl text-black transition-all hover:bg-opacity-20",on:{click:function(t){return t.preventDefault(),e.submitRating()}}},[e._v("\n          Submit Review\n        ")])]),e._v(" "),n("p",{staticClass:"text-sm"},[e._v("\n        We require your email in case we need to contact you about your comment, your email address is NEVER\n        displayed publicly with your comment.\n      ")]),e._v(" "),n("p",{staticClass:"text-sm"},[e._v("\n        All comments need to be approved before they are shown on the website, this usually takes no longer\n        than 48 hours.\n      ")])],1):e._e(),e._v(" "),e.submittedReviewForm?n("div",[n("p",[e._v("\n        Thank you for leaving your "),n("strong",[e._v(e._s(e.form.rating)+" star")]),e._v(" rating\n        "+e._s(e.showReviewForm?"and review":"")+" of "),n("strong",[e._v(e._s(e.name))]),e._v("!\n      ")])]):e._e()]:e._e()],2)}),[],!1,null,null,null).exports;var w=n(3923);const C={components:{Modal:function(){return n.e(5441).then(n.bind(n,4609))}},props:{withMargin:{type:Boolean,required:!1,default:!1},images:{type:Array,required:!0},altText:{required:!1,type:String,default:""},limit:{required:!1,type:Number,default:0}},data:function(){return{displayImage:!1,viewAll:!1,touchStart:0}},mounted:function(){var e=this;this.$root.$on("modal-closed",(function(){e.closeModal()}))},methods:{openImage:function(e){this.displayImage=e,this.modalKeyEvents("addEventListener")},goToNextImage:function(){this.displayImage+1>=this.images.length||(this.displayImage+=1)},goToPreviousImage:function(){0!==this.displayImage&&(this.displayImage-=1)},closeModal:function(){this.displayImage=!1,this.modalKeyEvents("removeEventListener")},handleTouchStart:function(e){this.touchStart=e.changedTouches[0].clientX},handleTouchEnd:function(e){var t=e.changedTouches[0].clientX;this.touchStart<t&&this.goToPreviousImage(),this.touchStart>t&&this.goToNextImage()},handleKeyUpEvent:function(e){switch(e.code){case"ArrowRight":this.goToNextImage();break;case"ArrowLeft":this.goToPreviousImage();break;case"Escape":this.$root.$emit("close-modal")}},modalKeyEvents:function(e){window[e]("keyup",this.handleKeyUpEvent)}}};const $=(0,o.Z)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"flex flex-wrap",class:e.withMargin?"":"-m-2"},e._l(e.images,(function(t,i){return n("div",{key:t.id},[0===e.limit||!0===e.viewAll||i<e.limit?n("img",{staticClass:"cursor-pointer p-1 max-w-[125px] max-h-[125px] lg:max-w-[200px] lg:max-h-[200px] 2xl:max-w-[250px] 2xl:max-h-[250px]",attrs:{src:t.thumb,alt:e.altText},on:{click:function(t){return e.openImage(i)}}}):e._e()])})),0),e._v(" "),e.limit>0&&e.images.length>e.limit&&!e.viewAll?[n("p",{staticClass:"mt-2 font-semibold text-blue-dark cursor-pointer hover:underline",on:{click:function(t){e.viewAll=!0}}},[e._v("\n      Viewing "),n("strong",{staticClass:"text-black"},[e._v(e._s(e.limit))]),e._v("\n      photos out of "),n("strong",{staticClass:"text-black"},[e._v(e._s(e.images.length))]),e._v(", view all user photos?\n    ")])]:e._e(),e._v(" "),!1!==e.displayImage?n("portal",{attrs:{to:"modal"}},[n("modal",{attrs:{title:e.altText}},[n("div",{staticClass:"relative"},[n("img",{attrs:{src:e.images[e.displayImage].path,alt:""}}),e._v(" "),n("div",{staticClass:"absolute w-full h-full top-0 left-0 flex justify-between",on:{touchstart:function(t){return e.handleTouchStart(t)},touchend:function(t){return e.handleTouchEnd(t)}}},[n("div",{staticClass:"w-1/2 md:max-w-[150px] group cursor-pointer",on:{click:function(t){return e.goToPreviousImage()}}},[e.displayImage>0?n("div",{staticClass:"absolute h-full px-4 bg-black bg-opacity-25 text-white top-0 left-0 flex items-center justify-center transition group-hover:bg-opacity-50"},[n("font-awesome-icon",{attrs:{icon:["fas","chevron-left"]}})],1):e._e()]),e._v(" "),n("div",{staticClass:"w-1/2 md:max-w-[150px] group cursor-pointer",on:{click:function(t){return e.goToNextImage()}}},[e.displayImage<e.images.length-1?n("div",{staticClass:"absolute h-full px-4 bg-black bg-opacity-25 text-white top-0 right-0 flex items-center justify-center transition group-hover:bg-opacity-50"},[n("font-awesome-icon",{attrs:{icon:["fas","chevron-right"]}})],1):e._e()])])])])],1):e._e()],2)}),[],!1,null,null,null).exports,k={components:{ImageGallery:$},mixins:[v,w.Z],props:{review:{type:Object,required:!0},eatery:{type:String,required:!0}},computed:{hasRatings:function(){return!!this.review.how_expensive||(!!this.review.food_rating||!!this.review.service_rating)}},methods:{howExpensive:function(){for(var e="",t=0;t<parseInt(this.review.how_expensive);t+=1)e+="£";return"".concat(e," - ").concat(this.howExpensiveValues[this.review.how_expensive-1].label)},ucfirst:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}};const F={components:{EateryAddReview:b,"eatery-review":(0,o.Z)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-box page-box-no-padding flex border border-grey-off shadow"},[n("div",{staticClass:"hidden sm:flex flex-col w-1/3 bg-grey-light md:w-1/4 max-w-[250px]"},[n("div",{staticClass:"h-8 px-3 flex items-center"},[n("global-ui-stars",{attrs:{stars:e.review.rating,size:"text-base md:text-lg","half-star":"star-half-alt","show-all":""}})],1),e._v(" "),n("div",{staticClass:"flex-1 border-r border-grey-off px-3 pt-0 pb-3 flex flex-col",class:e.hasRatings?"justify-between":"justify-end"},[e.hasRatings?n("ul",{staticClass:"flex flex-col space-y-px text-sm flex-1 mb-2"},[e.review.how_expensive?n("li",[e._v("\n          "+e._s(e.howExpensive(e.review))+"\n        ")]):e._e(),e._v(" "),e.review.food_rating?n("li",[e._v("\n          Food: "+e._s(e.ucfirst(e.review.food_rating))+"\n        ")]):e._e(),e._v(" "),e.review.service_rating?n("li",[e._v("\n          Service: "+e._s(e.ucfirst(e.review.service_rating))+"\n        ")]):e._e()]):e._e(),e._v(" "),n("ul",{staticClass:"flex flex-col space-y-px text-xs"},[e.review.name?n("li",[e._v("\n          "+e._s(e.review.name)+"\n        ")]):e._e(),e._v(" "),n("li",[e._v("\n          "+e._s(e.formatDate(e.review.created_at))+"\n        ")])])])]),e._v(" "),n("div",{staticClass:"flex flex-col w-full flex-1"},[n("div",{staticClass:"bg-grey-light px-3 py-1 flex justify-between text-sm items-center border-b border-grey-off sm:h-8 sm:justify-end"},[n("div",{staticClass:"sm:hidden"},[n("global-ui-stars",{attrs:{stars:e.review.rating,size:"text-base","half-star":"star-half-alt","show-all":""}})],1),e._v(" "),n("span",[e._v(e._s(e.review.human_date))])]),e._v(" "),n("div",{staticClass:"p-3 space-y-3"},[e.review.body?[n("div",{staticClass:"flex flex-col space-y-2"},[n("p",[e._v(e._s(e.review.body))]),e._v(" "),e.review.branch_name?n("p",[e._v("\n            Review from "),n("strong",[e._v(e._s(e.review.branch_name))]),e._v(" branch.\n          ")]):e._e(),e._v(" "),e.review.images?n("image-gallery",{attrs:{images:e.review.images,"alt-text":"Photo of "+e.eatery+" by "+e.review.name}}):e._e()],1)]:n("p",{staticClass:"italic"},[e._v("\n        Reviewer didn't leave a comment...\n      ")])],2),e._v(" "),n("div",{staticClass:"bg-grey-light px-3 py-1 flex justify-between text-sm items-center border-t border-grey-off sm:hidden"},[n("span",[e._v(e._s(e.review.name||""))]),e._v(" "),n("span",[e._v(e._s(e.formatDate(e.review.created_at)))])])])])}),[],!1,null,null,null).exports},props:{id:{type:Number,required:!0},name:{type:String,required:!0},reviews:{type:Array,required:!0},hasBeenRated:{type:Boolean,required:!0},isNationwide:{type:Boolean,required:!0}},data:function(){return{hasJustBeenRated:!1}},mounted:function(){var e=this;this.$root.$on("rated-place",(function(t){t===e.id&&(e.hasJustBeenRated=!0)}))}};const T=(0,o.Z)(F,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex flex-col space-y-3"},[n("div",{staticClass:"page-box space-y-3"},[n("h2",{staticClass:"text-xl font-semibold"},[e._v("\n      Your Reviews ("+e._s(e.reviews.length||0)+")\n    ")]),e._v(" "),n("p",{staticClass:"bg-blue bg-opacity-20 p-2 border border-blue text-sm rounded-lg"},[e._v("\n      All the reviews and ratings below have been submitted by visitors to our website and App,\n      ratings are applied straight away but text reviews must be validated by an admin before\n      they are visible.\n    ")])]),e._v(" "),e.hasBeenRated?e._e():n("EateryAddReview",{attrs:{id:e.id,name:e.name,"is-nationwide":e.isNationwide}}),e._v(" "),e.hasJustBeenRated?n("div",{staticClass:"page-box"},[n("p",[e._v("\n      Thank you for leaving your review of "),n("strong",[e._v(e._s(e.name))])])]):e._e(),e._v(" "),e.reviews.length?[e._l(e.reviews,(function(t){return[n("eatery-review",{key:t.id,attrs:{eatery:e.name,review:t}})]}))]:e._e()],2)}),[],!1,null,null,null).exports;const O={props:{eatery:{type:Object,required:!0}}};const D=(0,o.Z)(O,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.eatery.features.length?n("div",{staticClass:"page-box"},[n("p",{staticClass:"mb-2"},[e._v("\n    Here are some highlights you can get at "),n("strong",[e._v(e._s(e.eatery.name))])]),e._v(" "),n("ul",{staticClass:"flex flex-wrap space-x-12"},e._l(e.eatery.features,(function(t){return n("li",{key:t.id,staticClass:"leading-none items-center flex"},[n("div",{staticClass:"mr-2 flex-shrink-0 w-8"},[n("img",{staticClass:"w-full",attrs:{src:t.image,alt:t.feature,width:"100%",height:"100%"}})]),e._v(" "),n("span",{staticClass:"block font-semibold leading-none"},[e._v("\n        "+e._s(t.feature)+"\n      ")])])})),0)]):e._e()}),[],!1,null,null,null).exports;const M={components:{"form-textarea":function(){return Promise.all([n.e(5816),n.e(993)]).then(n.bind(n,8817))}},props:{place:{required:!0,type:Object}},data:function(){return{details:""}},mounted:function(){var e=this;this.$root.$on("details-change",(function(t){e.details=t}))},methods:{submitForm:function(){var e=this;if(!this.submitted)return""===this.details?(this.$root.$emit("details-validate"),void coeliac().error("Please enter the details before reporting the place!")):void coeliac().request().post("/api/wheretoeat/".concat(this.place.id,"/report"),{details:this.details}).then((function(t){if(200===t.status)return e.closeModal(),void coeliac().success("Thanks, we've received your report about ".concat(e.place.name," and we'll check it out ASAP!!"));coeliac().error("Sorry, there was an error submitting your report, please try again.")})).catch((function(){coeliac().error("Sorry, there was an error submitting your report, please try again.")}))},closeModal:function(){this.$root.$emit("close-modal","report-place")}}};const E={components:{modal:function(){return n.e(5441).then(n.bind(n,4609))},"report-place-modal":(0,o.Z)(M,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-3"},[n("p",{staticClass:"mb-2"},[e._v("\n    Has "+e._s(e.place.name)+" closed down? Or does it no longer do gluten free, or does it not do gluten free\n    properly? Or have the gluten free options changed?\n  ")]),e._v(" "),n("p",{staticClass:"mb-2"},[e._v("\n    Whatever it is, let us know below, and we'll check it out!\n  ")]),e._v(" "),n("div",{staticClass:"flex flex-col"},[n("div",{staticClass:"flex flex-col"},[n("div",{staticClass:"mb-5 flex-1"},[n("form-textarea",{attrs:{required:"",name:"details",value:e.details,rows:5}})],1),e._v(" "),n("div",{staticClass:"mb-5 flex-1 text-center"},[n("button",{staticClass:"mt-2 bg-blue bg-opacity-50 border border-blue rounded-lg px-6 py-2 text-xl text-black transition-all hover:bg-opacity-20",on:{click:function(t){return t.preventDefault(),e.submitForm()}}},[e._v("\n          Report Place\n        ")])])])])])}),[],!1,null,null,null).exports},props:{eatery:{type:Object,required:!0}},data:function(){return{showReportPlaceModal:!1}},mounted:function(){var e=this;this.$root.$on("modal-closed",(function(){e.showReportPlaceModal=!1}))}};const j=(0,o.Z)(E,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-box"},[e.eatery.restaurants.length?e._l(e.eatery.restaurants,(function(t){return n("div",{key:t.id},[t.restaurant_name?n("h4",{staticClass:"font-semibold"},[e._v("\n        "+e._s(t.restaurant_name)+"\n      ")]):e._e(),e._v(" "),n("p",{staticClass:"text-sm"},[e._v("\n        "+e._s(t.info)+"\n      ")])])})):[n("p",[e._v(e._s(e.eatery.info))])],e._v(" "),n("a",{staticClass:"cursor-pointer text-xs italic text-grey-dark cursor-pointer mt-2 font-semibold transition hover:text-grey-darkest",on:{click:function(t){t.preventDefault(),e.showReportPlaceModal=!0}}},[e._v("\n    Is there a problem with this location? Let us know.\n  ")]),e._v(" "),e.showReportPlaceModal?n("portal",{attrs:{to:"modal"}},[n("modal",{attrs:{title:"Report "+e.eatery.name}},[n("report-place-modal",{attrs:{place:e.eatery}})],1)],1):e._e()],2)}),[],!1,null,null,null).exports;const S={props:{eatery:{type:Object,required:!0},hasImages:{type:Boolean,required:!0}}};const I=(0,o.Z)(S,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return 1!==e.eatery.county.id?n("div",{staticClass:"page-box flex flex-col space-y-3 sm:flex-row sm:space-y-0 sm:space-x-3"},[n("div",{staticClass:"w-full h-map-small sm:w-1/2 lg:w-2/3 max-w-[600px]"},[n("map-static",{attrs:{lat:e.eatery.lat,lng:e.eatery.lng}})],1),e._v(" "),n("ul",{staticClass:"flex flex-col space-y-3 sm:w-1/2 lg:flex-1"},[n("li",{staticClass:"flex items-center space-x-3"},[n("font-awesome-icon",{staticClass:"text-xl",attrs:{icon:["fas","map-marker-alt"],"fixed-width":""}}),e._v(" "),n("span",{staticClass:"text-sm font-semibold"},[e._v(e._s(e.eatery.formatted_address))])],1),e._v(" "),e.eatery.website?n("li",[n("a",{staticClass:"flex items-center space-x-3 transition hover:text-blue-dark",attrs:{href:e.eatery.website,target:"_blank"}},[n("font-awesome-icon",{staticClass:"text-xl",attrs:{icon:["fas","external-link-alt"],"fixed-width":""}}),e._v(" "),n("span",{staticClass:"text-sm font-semibold"},[e._v("Visit Website")])],1)]):e._e(),e._v(" "),e.eatery.phone?n("li",[n("a",{staticClass:"flex items-center space-x-3 transition hover:text-blue-dark",attrs:{href:"tel:"+e.eatery.phone}},[n("font-awesome-icon",{staticClass:"text-xl",attrs:{icon:["fas","mobile-alt"],"fixed-width":""}}),e._v(" "),n("span",{staticClass:"text-sm font-semibold"},[e._v(e._s(e.eatery.phone))])],1)]):e._e()])]):e._e()}),[],!1,null,null,null).exports;const R={components:{FormSelect:function(){return Promise.all([n.e(5816),n.e(4014)]).then(n.bind(n,8219))},FormCheckbox:function(){return Promise.all([n.e(5816),n.e(7279)]).then(n.bind(n,966))}},props:{currentOpeningTimes:{required:!0,type:Object}},data:function(){return{openingTimes:[]}},computed:{days:function(){return["monday","tuesday","wednesday","thursday","friday","saturday","sunday"]},hours:function(){return Array.from({length:24}).map((function(e,t){return{value:t,label:(t<10?"0":"")+t.toString()}}))},minutes:function(){return[{value:0,label:"00"},{value:15,label:"15"},{value:30,label:"30"},{value:45,label:"45"}]}},mounted:function(){var e=this;this.openingTimes=this.days.map((function(t){return e.constructDay(t)})),this.days.forEach((function(t){var n=e.getCurrentDayIndex(t);e.$root.$on("".concat(t,"_closed-change"),(function(i){e.$set(e.openingTimes,n,e.constructDay(t,i)),e.emitChange()})),e.$root.$on("".concat(t,"_start_hour-change"),(function(t){e.openingTimes[n].start[0]=t,e.emitChange()})),e.$root.$on("".concat(t,"_start_minutes-change"),(function(t){e.openingTimes[n].start[1]=t,e.emitChange()})),e.$root.$on("".concat(t,"_end_hour-change"),(function(t){e.openingTimes[n].end[0]=t,e.emitChange()})),e.$root.$on("".concat(t,"_end_minutes-change"),(function(t){e.openingTimes[n].end[1]=t,e.emitChange()}))}))},methods:{constructDay:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{key:e,label:e.charAt(0).toUpperCase()+e.slice(1),closed:null===t?null===this.currentOpeningTimes[e][0]:t,start:t?[null,null]:this.splitTime(this.currentOpeningTimes[e][0]),end:t?[null,null]:this.splitTime(this.currentOpeningTimes[e][1])}},splitTime:function(e){if(!e)return[null,null];var t=e.split(":");return[parseInt(t[0]),parseInt(t[1])]},getCurrentDayIndex:function(e){var t=this.openingTimes.filter((function(t){return t.key===e}));return this.openingTimes.indexOf(t[0])},emitChange:function(){this.$root.$emit("opening_times-change",this.openingTimes)}}};const q=(0,o.Z)(R,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-sm"},[n("ul",{staticClass:"flex flex-col space-y-px divide-y divide-grey-off"},e._l(e.openingTimes,(function(t){return n("li",{key:t.key,staticClass:"flex flex-col w-full py-1 space-y-2 xs:flex-row xs:justify-between xs:space-x-2 xs:space-y-0 xs:items-center"},[n("div",{staticClass:"flex justify-between xs:flex-1 xs:items-center"},[n("div",[e._v(e._s(t.label))]),e._v(" "),n("div",{staticClass:"flex space-x-2 items-center"},[n("span",[e._v("Closed")]),e._v(" "),n("form-checkbox",{attrs:{value:t.closed,name:t.key+"_closed","input-size":"text-xs","highlight-style":"background","highlight-colour":"blue-light",rounded:""}})],1)]),e._v(" "),n("div",{staticClass:"flex space-x-1 items-center justify-between"},[n("div",{staticClass:"flex space-x-px"},[n("form-select",{attrs:{name:t.key+"_start_hour",options:e.hours,value:t.closed?0:t.start[0],disabled:t.closed,small:""}}),e._v(" "),n("form-select",{attrs:{name:t.key+"_start_minutes",options:e.minutes,value:t.closed?0:t.start[1],disabled:t.closed,small:""}})],1),e._v(" "),n("span",{staticClass:"hidden xs:block"},[e._v("-")]),e._v(" "),n("div",{staticClass:"flex space-x-px"},[n("form-select",{attrs:{name:t.key+"_end_hour",options:e.hours,value:t.closed?0:t.end[0],disabled:t.closed,small:""}}),e._v(" "),n("form-select",{attrs:{name:t.key+"_end_minutes",options:e.minutes,value:t.closed?0:t.end[1],disabled:t.closed,small:""}})],1)])])})),0)])}),[],!1,null,null,null).exports;const P={components:{FormCheckbox:function(){return Promise.all([n.e(5816),n.e(7279)]).then(n.bind(n,966))}},props:{currentFeatures:{required:!0,type:Array}},data:function(){return{features:[]}},mounted:function(){var e=this;this.features=this.currentFeatures.map((function(e){return{key:e.id,label:e.label,selected:e.selected}})),this.features.forEach((function(t,n){e.$root.$on("feature_".concat(t.key,"-change"),(function(t){e.features[n].selected=t,e.emitChange()}))}))},methods:{emitChange:function(){this.$root.$emit("features-change",this.features)}}};const N={components:{Loader:function(){return n.e(8540).then(n.bind(n,2756))},FormInput:function(){return Promise.all([n.e(5816),n.e(1531)]).then(n.bind(n,9668))},FormSelect:function(){return Promise.all([n.e(5816),n.e(4014)]).then(n.bind(n,8219))},FormTextarea:function(){return Promise.all([n.e(5816),n.e(993)]).then(n.bind(n,8817))},EateryOpeningTimes:q,EateryFeatures:(0,o.Z)(P,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-sm"},[n("ul",{staticClass:"flex flex-col space-y-px divide-y divide-grey-off"},e._l(e.features,(function(t){return n("li",{key:t.key,staticClass:"flex justify-between w-full py-1"},[n("span",[e._v(e._s(t.label))]),e._v(" "),n("div",{staticClass:"flex space-x-1 items-center justify-between"},[n("form-checkbox",{attrs:{value:t.selected,name:"feature_"+t.key,"input-size":"text-xs","highlight-style":"background","highlight-colour":"blue-light",rounded:""}})],1)])})),0)])}),[],!1,null,null,null).exports},props:{id:{type:Number,required:!0}},data:function(){return{loading:!0,editing:null,newValue:null,eatery:{}}},computed:{currentFieldIndex:function(){return this.editing?this.fields.indexOf(this.editing):null},fields:function(){var e=this;return[{id:"address",label:"Address",shouldDisplay:!1===this.eatery.is_nationwide,getter:function(){return e.eatery.address.split("<br />").join(", ")},isFormField:!0,formField:{component:"form-textarea",value:function(){return e.eatery.address.split("<br />").join("\n")},props:{rows:5}},updated:!1},{id:"website",label:"Website",shouldDisplay:!0,getter:function(){return e.eatery.website},isFormField:!0,formField:{component:"form-input",value:function(){return e.eatery.website}},updated:!1},{id:"gf_menu_link",label:"Gluten Free Menu Link",shouldDisplay:!0,getter:function(){return e.eatery.gf_menu_link},isFormField:!0,formField:{component:"form-input",value:function(){return e.eatery.gf_menu_link}},updated:!1},{id:"phone",label:"Phone Number",shouldDisplay:!1===this.eatery.is_nationwide,getter:function(){return e.eatery.phone},isFormField:!0,formField:{component:"form-input",value:function(){return e.eatery.phone}},updated:!1},{id:"venue_type",label:"Venue Type",shouldDisplay:!0,getter:function(){return e.eatery.venue_type.label},isFormField:!0,formField:{component:"form-select",value:function(){return e.eatery.venue_type.id},props:{options:this.eatery.venue_type.values}},updated:!1},{id:"cuisine",label:"Cuisine",shouldDisplay:1===this.eatery.type_id,getter:function(){return e.eatery.cuisine.label},isFormField:!0,formField:{component:"form-select",value:function(){return e.eatery.cuisine.id},props:{options:this.eatery.cuisine.values}},updated:!1},{id:"opening_times",label:"Opening Times",shouldDisplay:3!==this.eatery.type_id&&!1===this.eatery.is_nationwide,getter:function(){return e.eatery.opening_times?e.eatery.opening_times.today?e.eatery.opening_times.today.join(" - "):"Currently closed":null},capitalise:!0,isFormField:!1,component:{name:"eatery-opening-times",props:{currentOpeningTimes:this.eatery.opening_times}},updated:!1},{id:"features",label:"Features",shouldDisplay:!0,getter:function(){return e.eatery.features.selected.map((function(e){return e.label})).join(", ")},isFormField:!1,component:{name:"eatery-features",props:{currentFeatures:this.eatery.features.values}},updated:!1},{id:"info",label:"Additional Information",shouldDisplay:!0,getter:function(){return"Is there anything else we should know about this location?"},truncate:!1,isFormField:!0,formField:{component:"form-textarea",value:function(){return""}},updated:!1}]}},mounted:function(){this.loadEatery()},methods:{cancelEditingField:function(){this.editing&&(this.$root.$off("".concat(this.editing.id,"-change"),this.handleFieldUpdate),this.editing=null,this.newValue=null)},loadEatery:function(){var e=this;coeliac().request().get("/api/wheretoeat/".concat(this.id,"/suggest-edit")).then((function(t){e.eatery=t.data.data,e.loading=!1}))},openField:function(e){this.cancelEditingField(this.editing),this.newValue=e.isFormField?e.formField.value():"",this.$root.$on("".concat(e.id,"-change"),this.handleFieldUpdate),this.editing=e},handleFieldUpdate:function(e){this.newValue=e},isFieldBeingEdited:function(e){var t;return e.label===(null===(t=this.editing)||void 0===t?void 0:t.label)},isFieldNotBeingEdited:function(e){return!this.isFieldBeingEdited(e)},updateField:function(){var e=this;this.newValue?coeliac().request().post("/api/wheretoeat/".concat(this.id,"/suggest-edit"),{field:this.editing.id,value:this.newValue}).then((function(){e.fields[e.currentFieldIndex].updated=!0,e.cancelEditingField(),coeliac().success("Thanks for suggesting an improvement to this location!")})).catch((function(){coeliac().error("Sorry, we were unable to save your suggested edit, please try again...")})):coeliac().error("Please complete the form before submitting!")}}};const Z={components:{Modal:function(){return n.e(5441).then(n.bind(n,4609))},"improve-eatery-modal":(0,o.Z)(N,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?n("div",{staticClass:"flex justify-center items-center py-12 relative"},[n("Loader",{attrs:{show:""}})],1):n("div",{staticClass:"p-4"},[n("ul",{staticClass:"flex flex-col divide-y divide-blue-light"},[e._l(e.fields,(function(t){return[t.shouldDisplay?n("li",{key:t.id,staticClass:"flex flex-col py-1"},[t.updated?n("div",{staticClass:"bg-blue-light bg-opacity-25 rounded p-1 text-center"},[e._v("\n          Thanks for your suggestion!\n        ")]):[n("div",{staticClass:"flex justify-between items-center w-full"},[n("span",{class:e.isFieldBeingEdited(t)?"text-blue-dark font-semibold text-sm":""},[e._v(e._s(t.label))]),e._v(" "),e.isFieldNotBeingEdited(t)?n("span",{staticClass:"font-semibold text-blue-dark transition text-xs cursor-pointer hover:text-black",on:{click:function(n){return e.openField(t)}}},[e._v("\n              Update\n            ")]):e._e()]),e._v(" "),e.isFieldNotBeingEdited(t)?n("div",{staticClass:"text-xs text-grey",class:{capitalize:t.capitalise,truncate:void 0===t.truncate||t.truncate}},[e._v("\n            "+e._s(t.getter()||"Not set")+"\n          ")]):e._e(),e._v(" "),e.isFieldBeingEdited(t)?n("div",{staticClass:"flex flex-col space-y-2"},[t.isFormField?[n(t.formField.component,e._b({tag:"component",attrs:{name:t.id,value:t.formField.value(),small:""}},"component",t.formField.props||null,!1))]:[n(t.component.name,e._b({tag:"component"},"component",t.component.props,!1))],e._v(" "),n("div",{staticClass:"flex justify-between text-xs font-semibold xs:text-base"},[n("a",{staticClass:"bg-yellow py-1 px-2 rounded cursor-pointer",on:{click:function(t){return t.preventDefault(),e.cancelEditingField()}}},[e._v("\n                Cancel\n              ")]),e._v(" "),n("a",{staticClass:"bg-blue py-1 px-2 rounded cursor-pointer xs:text-base",on:{click:function(t){return t.preventDefault(),e.updateField()}}},[e._v("\n                Submit\n              ")])])],2):e._e()]],2):e._e()]}))],2)])}),[],!1,null,null,null).exports},props:{id:{type:Number,required:!0},name:{type:String,required:!0}},data:function(){return{showModal:!1}},mounted:function(){var e=this;this.$root.$on("modal-closed",(function(){e.showModal=!1}))}};const A=(0,o.Z)(Z,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"border border-blue bg-blue-lightest p-2 rounded mx-3 cursor-pointer hover:bg-blue-light transition lg:mx-0",on:{click:function(t){e.showModal=!0}}},[e._v("\n    Can you improve the information we hold for "+e._s(e.name)+"?\n  ")]),e._v(" "),e.showModal?n("portal",{attrs:{to:"modal"}},[n("modal",{attrs:{title:"Suggest an edit","modal-classes":"w-full"}},[n("improve-eatery-modal",{attrs:{id:e.id}})],1)],1):e._e()],1)}),[],!1,null,null,null).exports;const L={components:{ImageGallery:$},props:{eatery:{type:Object,required:!0}}};const B=(0,o.Z)(L,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.eatery.userImages.length>0?n("div",{staticClass:"page-box flex flex-col space-y-3"},[n("p",[e._v("\n    Here are some photos taken at "),n("strong",[e._v(e._s(e.eatery.name))]),e._v(" that other visitors have submitted!\n  ")]),e._v(" "),n("image-gallery",{attrs:{images:e.eatery.userImages,"alt-text":"Photo of "+e.eatery.name}})],1):e._e()}),[],!1,null,null,null).exports;const Y={components:{ImageGallery:$},mixins:[v,w.Z],props:{review:{type:Object,required:!0},eatery:{type:Object,required:!0}},data:function(){return{displayFullReview:!1}},computed:{hasRatings:function(){return!!this.review.how_expensive||(!!this.review.food_rating||!!this.review.service_rating)},reviewLength:function(){return this.review.body.length}},methods:{howExpensive:function(){for(var e="",t=0;t<parseInt(this.review.how_expensive);t+=1)e+="£";return"<strong>".concat(e,"</strong> - ").concat(this.howExpensiveValues[this.review.how_expensive-1].label)},ucfirst:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},reviewBody:function(){var e=this.review.body;return this.reviewLength>500&&!this.displayFullReview&&(e="".concat(e.substring(0,e.indexOf(" ",500)),"...")),e.replaceAll("\n","<br />")}}};const H={components:{"eatery-header":p,"eatery-reviews":T,"eatery-admin-review":(0,o.Z)(Y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-box flex flex-col w-full flex-1 space-y-2"},[n("h3",{staticClass:"text-lg font-semibold"},[e._v("\n    Our Review\n  ")]),e._v(" "),n("div",{staticClass:"flex flex-col space-y-2"},[e.hasRatings?n("ul",{staticClass:"flex flex-col flex-1 mb-2 space-y-1 bg-blue-light bg-opacity-25 border border-blue rounded p-1 text-sm xs:flex-row xs:justify-around xs:space-y-0"},[n("li",{staticClass:"flex space-x-1 text-md mb-2"},[n("strong",[e._v("Our Rating")]),e._v(" "),n("global-ui-stars",{attrs:{stars:e.review.rating,size:"text-base md:text-lg","half-star":"star-half-alt","show-all":""}})],1),e._v(" "),e.review.how_expensive?n("li",{domProps:{innerHTML:e._s(e.howExpensive(e.review))}}):e._e(),e._v(" "),e.review.food_rating?n("li",[n("strong",[e._v("Food")]),e._v(": "+e._s(e.ucfirst(e.review.food_rating))+"\n      ")]):e._e(),e._v(" "),e.review.service_rating?n("li",[n("strong",[e._v("Service")]),e._v(": "+e._s(e.ucfirst(e.review.service_rating))+"\n      ")]):e._e()]):e._e(),e._v(" "),n("p",{domProps:{innerHTML:e._s(e.reviewBody())}}),e._v(" "),e.reviewLength>500&&!e.displayFullReview?[n("a",{staticClass:"text-lg text-blue-dark hover:underline font-semibold cursor-pointer",on:{click:function(t){t.preventDefault(),e.displayFullReview=!0}}},[e._v("Read our full review!")])]:e._e(),e._v(" "),e.review.images?n("div",{staticClass:"flex flex-col bg-blue-light bg-opacity-25 border border-blue rounded p-2"},[n("p",{staticClass:"font-semibold text-md"},[e._v("\n        Our Photos\n      ")]),e._v(" "),n("image-gallery",{attrs:{images:e.review.images,"with-margin":"","alt-text":"Our photos of "+e.eatery.name}})],1):e._e()],2)])}),[],!1,null,null,null).exports,"eatery-features":D,"eatery-info":j,"eatery-map":I,"eatery-photos":B,"eatery-can-you-improve":A},props:{eatery:{type:Object,required:!0}},data:function(){return{hasBeenRated:!1}},mounted:function(){var e=this;this.hasBeenRated=this.eatery.has_been_rated,this.$root.$on("modal-closed",(function(){e.showReportPlaceModal=!1})),this.$root.$on("rated-place",(function(t){t===e.eatery.id&&(e.hasBeenRated=!0)}))}};const V=(0,o.Z)(H,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex flex-col space-y-3"},[n("eatery-header",{attrs:{eatery:e.eatery}}),e._v(" "),e.eatery.features?n("eatery-features",{attrs:{eatery:e.eatery}}):e._e(),e._v(" "),n("eatery-info",{attrs:{eatery:e.eatery}}),e._v(" "),n("eatery-can-you-improve",{attrs:{id:e.eatery.id,name:e.eatery.name}}),e._v(" "),n("eatery-map",{attrs:{eatery:e.eatery,"has-images":e.eatery.userImages.length>0}}),e._v(" "),e.eatery.formattedReviews.admin?n("eatery-admin-review",{attrs:{eatery:e.eatery,review:e.eatery.formattedReviews.admin[0]}}):e._e(),e._v(" "),n("eatery-photos",{attrs:{eatery:e.eatery}}),e._v(" "),n("eatery-reviews",{attrs:{id:e.eatery.id,name:e.eatery.name,reviews:e.eatery.formattedReviews.guest||[],"has-been-rated":e.hasBeenRated,"is-nationwide":"Nationwide"===e.eatery.county.county}})],1)}),[],!1,null,null,null).exports}}]);