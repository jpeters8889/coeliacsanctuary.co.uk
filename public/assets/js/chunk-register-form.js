"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1613],{7129:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});const o={components:{"form-input":function(){return Promise.all([a.e(5816),a.e(1531)]).then(a.bind(a,9668))},"form-checkbox":function(){return Promise.all([a.e(5816),a.e(7279)]).then(a.bind(a,966))},loader:function(){return a.e(8540).then(a.bind(a,2756))}},data:function(){return{isSubmitting:!1,alreadyHasAccount:!1,fields:{name:"",email:"",password:"",password_confirmation:"",terms:!1},validity:{name:!1,email:!1,password:!1,password_confirmation:!1,terms:!1},errors:{name:"",email:"",password:"",password_confirmation:"",generic:""}}},mounted:function(){var e=this;Object.keys(this.fields).forEach((function(t){e.$root.$on("".concat(t,"-error"),(function(){e.validity[t]=!1})),e.$root.$on("".concat(t,"-valid"),(function(){e.validity[t]=!0})),e.$root.$on("".concat(t,"-value"),(function(a){e.fields[t]=a}))})),this.$root.$on("terms-change",(function(t){e.fields.terms=t,e.validity.terms=t}))},methods:{submitRegistration:function(){var e=this;this.validateForm()?(this.isSubmitting=!0,coeliac().request().post("/api/member/register",this.fields).then((function(){window.location="/member/dashboard"})).catch((function(t){422===t.response.status&&t.response.data.errors.email&&"Your email is already associated with an account!"===t.response.data.errors.email[0]?e.alreadyHasAccount=!0:(coeliac().error("Please correct any errors before continuing!"),e.fields.password="",e.validity.password=!1,e.fields.password_confirmation="",e.validity.password_confirmation=!1,e.fields.terms=!1,e.validity.terms=!1,e.$root.$emit("password-set-value",""),e.$root.$emit("password_confirmation-set-value",""),e.$root.$emit("terms-set-value",!1))})).finally((function(){e.isSubmitting=!1}))):coeliac().error("Please complete all fields!")},validateForm:function(){var e=this;Object.keys(this.validity).forEach((function(t){e.$root.$emit("".concat(t,"-get-value"))}));var t=!0;return Object.keys(this.validity).forEach((function(a){!1===e.validity[a]&&(t=!1)})),t}}};const r=(0,a(1900).Z)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex justify-center items-center"},[e.alreadyHasAccount?a("div",{staticClass:"rounded-lg border border-blue p-4 flex flex-col space-y-4 w-full max-w-basket-sidebar bg-grey-lightest text-lg text-center"},[a("p",[e._v("\n      Your email "+e._s(e.fields.email)+" is already associated with an account!\n    ")]),e._v(" "),a("p",{staticClass:"mt-2"},[a("member-login-trigger",{staticClass:"text-blue cursor-pointer text-semibold hover:text-blue-dark transition-all"},[e._v("\n        Login now!\n      ")])],1)]):a("form",{staticClass:"rounded-lg p-4 flex flex-col space-y-4 w-full max-w-lg",on:{submit:function(t){return t.preventDefault(),e.submitRegistration.apply(null,arguments)}}},[a("div",{staticClass:"mx-auto",staticStyle:{width:"50px"}},[a("global-layout-coeliac-icon",{attrs:{colour:"#80CCFC"}})],1),e._v(" "),a("p",[e._v("\n      Register an account on Coeliac Sanctuary today and get access to our member dashboard where you can\n      create lists of your favourite recipes and blogs, subscribe to get notified when we add places to eat\n      near you, view your order history in our shop, plus much more!\n    ")]),e._v(" "),a("form-input",{attrs:{type:"text",required:"",name:"name",label:"Your Name",value:e.fields.name,autocomple:"name"}}),e._v(" "),a("form-input",{attrs:{type:"email",required:"",name:"email",label:"Email Address",value:e.fields.email,autocomple:"email"}}),e._v(" "),a("form-input",{attrs:{type:"password",required:"",name:"password",label:"Password",value:e.fields.password,autocomplete:"password"}}),e._v(" "),a("form-input",{attrs:{type:"password",required:"",name:"password_confirmation",label:"Confirm your password",match:e.fields.password,value:e.fields.password_confirmation,autocomplete:"password_confirmation"}}),e._v(" "),a("form-checkbox",{attrs:{required:"",name:"terms","input-size":"text-base",label:"I accept the <a href='/terms-of-use' target='_blank' class='font-semibold text-blue-dark hover:text-black'>Terms and Conditions</a>",value:e.fields.terms}}),e._v(" "),a("button",{staticClass:"rounded-lg bg-blue leading-none text-lg font-semibold text-white hover:bg-blue-light transition-all flex items-center justify-center",class:e.isSubmitting?"py-2":"py-3",staticStyle:{height:"42px"},attrs:{disabled:e.isSubmitting},on:{click:function(t){return t.preventDefault(),e.submitRegistration.apply(null,arguments)}}},[e.isSubmitting?a("loader",{attrs:{"background-position":"",show:!0,height:"25px",width:"25px","border-width":"3px","faded-border-color":"border-white border-opacity-50","primary-border-color":"white"}}):a("span",[e._v("Join now!")])],1),e._v(" "),e._m(0)],1)])}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex justify-end text-xs mt-2 font-semibold"},[a("a",{staticClass:"text-blue hover:text-grey",attrs:{href:"/member/forgot-password"}},[e._v("Forgotten Password?")])])}],!1,null,null,null).exports}}]);