!function(t){var e={};function o(n){if(e[n])return e[n].exports;var l=e[n]={i:n,l:!1,exports:{}};return t[n].call(l.exports,l,l.exports,o),l.l=!0,l.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var l in t)o.d(n,l,function(e){return t[e]}.bind(null,l));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o(o.s=0)}([function(t,e,o){o(1),t.exports=o(2)},function(t,e,o){"use strict";o.r(e);var n=function(t,e,o,n,l,r,a,s){var i,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=o,c._compiled=!0),n&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),a?(i=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),l&&l.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=i):l&&(i=s?function(){l.call(this,this.$root.$options.shadowRoot)}:l),i)if(c.functional){c._injectStyles=i;var u=c.render;c.render=function(t,e){return i.call(e),u(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,i):[i]}return{exports:t,options:c}}({props:{data:Object|Array,labels:Object|Array},data:function(){return{showDeleteModal:!1,showApproveModal:!1}},computed:{isApproved:function(){return!0==!!this.data.completed},information:function(){return[{title:"Created At",text:this.formatDate(this.data.created_at)}]}},mounted:function(){var t=this;Architect.$on("modal-close",(function(e){switch(e.id){case"delete":t.showDeleteModal=!1;break;case"complete":t.showApproveModal=!1}}))},methods:{deleteRequest:function(){var t=this;window.Architect.request().delete("/external/coeliac-place-reports/delete/"+this.data.id).then((function(){window.Architect.success("Place Report Deleted"),t.showDeleteModal=!1}))},completeRequest:function(){var t=this;window.Architect.request().put("/external/coeliac-place-reports/complete/"+this.data.id).then((function(){window.Architect.success("Place Report Completed"),t.showApproveModal=!1,t.data.completed=!0}))},formatDate:function(t){return moment(t).format("DD/MM/YY HH:mm:ss")}}},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"flex p-2 justify-between flex-col md:flex-row",class:t.isApproved?"":"bg-red-200"},[o("div",{staticClass:"flex flex-col md:w-4/5"},[o("div",{staticClass:"mb-1",domProps:{innerHTML:t._s(t.data.details)}}),t._v(" "),o("span",{staticClass:"italic"},[t._v(t._s(t.data.eatery.full_name))])]),t._v(" "),o("div",{staticClass:"font-semibold mt-1 flex flex-col md:w-1/5"},[o("div",{staticClass:"mb-1 flex flex-col"},t._l(t.information,(function(e){return o("div",{staticClass:"flex flex-col leading-none mb-1"},[o("strong",{staticClass:"text-blue-700 font-semibold flex-1"},[t._v(t._s(e.title))]),t._v(" "),o("span",[t._v(t._s(e.text))])])})),0),t._v(" "),o("button",{staticClass:"button button-negative py-1 text-sm px-2 rounded mb-1",on:{click:function(e){e.preventDefault(),t.showDeleteModal=!0}}},[t._v("\n                Delete\n            ")]),t._v(" "),t.isApproved?t._e():[o("button",{staticClass:"button button-primary py-1 text-sm px-2 rounded mb-1",on:{click:function(e){e.preventDefault(),t.showApproveModal=!0}}},[t._v("\n                    Complete\n                ")])]],2)]),t._v(" "),t.showDeleteModal?o("portal",{attrs:{to:"modal"}},[o("modal",{attrs:{title:"Delete Place Request",id:"delete"}},[o("div",{staticClass:"w-full flex flex-col justify-center items-center leading-none"},[o("p",{staticClass:"text-xl"},[t._v("Are you sure you want to delete this report?")]),t._v(" "),o("div",{staticClass:"mt-4"},[o("button",{staticClass:"button button-negative button-default mr-2",on:{click:function(e){return e.preventDefault(),t.deleteRequest()}}},[t._v("\n                        Delete\n                    ")]),t._v(" "),o("button",{staticClass:"button button-primary button-default",on:{click:function(e){e.preventDefault(),t.showDeleteModal=!t.showDeleteModal}}},[t._v("\n                        Cancel\n                    ")])])])])],1):t._e(),t._v(" "),t.showApproveModal?o("portal",{attrs:{to:"modal"}},[o("modal",{attrs:{title:"Complete Place Request",id:"complete"}},[o("div",{staticClass:"w-full flex flex-col justify-center items-center leading-none"},[o("p",{staticClass:"text-xl"},[t._v("Are you sure you want to mark this place report as completed?")]),t._v(" "),o("div",{staticClass:"mt-4"},[o("button",{staticClass:"button button-positive button-default mr-2",on:{click:function(e){return e.preventDefault(),t.completeRequest()}}},[t._v("\n                        Complete\n                    ")]),t._v(" "),o("button",{staticClass:"button button-primary button-default",on:{click:function(e){e.preventDefault(),t.showApproveModal=!t.showApproveModal}}},[t._v("\n                        Cancel\n                    ")])])])])],1):t._e()],1)}),[],!1,null,null,null).exports;Architect.onBoot((function(t){t.component("place-reports-card-card",n)}))},function(t,e){}]);