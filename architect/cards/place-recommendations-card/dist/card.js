!function(t){var e={};function o(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o(o.s=0)}([function(t,e,o){o(1),t.exports=o(2)},function(t,e,o){"use strict";o.r(e);var n=function(t,e,o,n,a,l,s,r){var i,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=o,c._compiled=!0),n&&(c.functional=!0),l&&(c._scopeId="data-v-"+l),s?(i=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},c._ssrRegister=i):a&&(i=r?function(){a.call(this,this.$root.$options.shadowRoot)}:a),i)if(c.functional){c._injectStyles=i;var d=c.render;c.render=function(t,e){return i.call(e),d(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,i):[i]}return{exports:t,options:c}}({props:{data:Object|Array,labels:Object|Array},data:function(){return{showDeleteModal:!1,showApproveModal:!1,showConvertModal:!1}},computed:{isApproved:function(){return!0==!!this.data.completed},information:function(){return[{title:"Created At",text:this.formatDate(this.data.created_at)}]}},mounted:function(){var t=this;Architect.$on("modal-close",(function(e){switch(e.id){case"delete":t.showDeleteModal=!1;break;case"convert":t.showConvertModal=!1;break;case"complete":t.showApproveModal=!1}}))},methods:{deleteRecommendation:function(){var t=this;window.Architect.request().delete("/external/coeliac-place-recommendations/delete/".concat(this.data.id)).then((function(){window.Architect.success("Place Report Deleted"),t.showDeleteModal=!1}))},completeRecommendation:function(){var t=this;window.Architect.request().put("/external/coeliac-place-recommendations/complete/".concat(this.data.id)).then((function(){window.Architect.success("Place Report Completed"),t.showApproveModal=!1,t.data.completed=!0}))},convertRecommendation:function(){var t=this;window.Architect.request().post("/external/coeliac-place-recommendations/convert/".concat(this.data.id)).then((function(e){if(e.data.error)return window.Architect.error("There was an error converting the location, please add manually."),t.showConvertModal=!1,void console.log(e.data.message);window.location.href="/cs-adm/blueprints/wheretoeat/".concat(e.data.id)}))},formatDate:function(t){return moment(t).format("DD/MM/YY HH:mm:ss")}}},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"flex p-2 justify-between flex-col md:flex-row",class:t.isApproved?"":"bg-red-200"},[o("div",{staticClass:"flex flex-col md:w-4/5"},[o("h3",{staticClass:"text-lg text-blue-800 font-semibold"},[t._v("\n        "+t._s(t.data.place_name)+"\n      ")]),t._v(" "),o("span",{staticClass:"font-semibold text-sm"},[t._v(t._s(t.data.place_location))]),t._v(" "),o("div",{staticClass:"mb-1",domProps:{innerHTML:t._s(t.data.place_details)}}),t._v(" "),o("span",{staticClass:"italic"},[t._v(t._s(t.data.name)+", "+t._s(t.data.email))])]),t._v(" "),o("div",{staticClass:"font-semibold mt-1 flex flex-col md:w-1/5"},[o("div",{staticClass:"mb-1 flex flex-col"},t._l(t.information,(function(e){return o("div",{staticClass:"flex flex-col leading-none mb-1"},[o("strong",{staticClass:"text-blue-700 font-semibold flex-1"},[t._v(t._s(e.title))]),t._v(" "),o("span",[t._v(t._s(e.text))])])})),0),t._v(" "),o("button",{staticClass:"button button-negative py-1 text-sm px-2 rounded mb-1",on:{click:function(e){e.preventDefault(),t.showDeleteModal=!0}}},[t._v("\n        Delete\n      ")]),t._v(" "),t.isApproved?t._e():[o("button",{staticClass:"button button-positive py-1 text-sm px-2 rounded mb-1",on:{click:function(e){e.preventDefault(),t.showConvertModal=!0}}},[t._v("\n          Convert to Eatery\n        ")]),t._v(" "),o("button",{staticClass:"button button-primary py-1 text-sm px-2 rounded mb-1",on:{click:function(e){e.preventDefault(),t.showApproveModal=!0}}},[t._v("\n          Complete\n        ")])]],2)]),t._v(" "),t.showDeleteModal?o("portal",{attrs:{to:"modal"}},[o("modal",{attrs:{id:"delete",title:"Delete Place Request"}},[o("div",{staticClass:"w-full flex flex-col justify-center items-center leading-none"},[o("p",{staticClass:"text-xl"},[t._v("\n          Are you sure you want to delete this recommendation?\n        ")]),t._v(" "),o("div",{staticClass:"mt-4"},[o("button",{staticClass:"button button-negative button-default mr-2",on:{click:function(e){return e.preventDefault(),t.deleteRecommendation()}}},[t._v("\n            Delete\n          ")]),t._v(" "),o("button",{staticClass:"button button-primary button-default",on:{click:function(e){e.preventDefault(),t.showDeleteModal=!t.showDeleteModal}}},[t._v("\n            Cancel\n          ")])])])])],1):t._e(),t._v(" "),t.showConvertModal?o("portal",{attrs:{to:"modal"}},[o("modal",{attrs:{id:"convert",title:"Convert Place Request"}},[o("div",{staticClass:"w-full flex flex-col justify-center items-center leading-none"},[o("p",{staticClass:"text-xl"},[t._v("\n          Are you sure you want to convert this request to an eatery? This will create a new eatery in the\n          database marked as hidden with the basic data completed.\n        ")]),t._v(" "),o("div",{staticClass:"mt-4"},[o("button",{staticClass:"button button-positive button-default mr-2",on:{click:function(e){return e.preventDefault(),t.convertRecommendation()}}},[t._v("\n            Convert\n          ")]),t._v(" "),o("button",{staticClass:"button button-primary button-default",on:{click:function(e){e.preventDefault(),t.showApproveModal=!t.showApproveModal}}},[t._v("\n            Cancel\n          ")])])])])],1):t._e(),t._v(" "),t.showApproveModal?o("portal",{attrs:{to:"modal"}},[o("modal",{attrs:{id:"complete",title:"Complete Place Request"}},[o("div",{staticClass:"w-full flex flex-col justify-center items-center leading-none"},[o("p",{staticClass:"text-xl"},[t._v("\n          Are you sure you want to mark this place recommendation as completed?\n        ")]),t._v(" "),o("div",{staticClass:"mt-4"},[o("button",{staticClass:"button button-positive button-default mr-2",on:{click:function(e){return e.preventDefault(),t.completeRecommendation()}}},[t._v("\n            Complete\n          ")]),t._v(" "),o("button",{staticClass:"button button-primary button-default",on:{click:function(e){e.preventDefault(),t.showApproveModal=!t.showApproveModal}}},[t._v("\n            Cancel\n          ")])])])])],1):t._e()],1)}),[],!1,null,null,null).exports;Architect.onBoot((function(t){t.component("place-recommendations-card-card",n)}))},function(t,e){}]);